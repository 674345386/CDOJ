(function(){var g,v,l,n,d,h,k,p,b,w,y,s,z,e,q,u,o,c,j,m,r,x,a,A,D,f,t,C,i,B;p={OJ_WAIT:0,OJ_AC:1,OJ_PE:2,OJ_TLE:3,OJ_MLE:4,OJ_WA:5,OJ_OLE:6,OJ_CE:7,OJ_RE_SEGV:8,OJ_RE_FPE:9,OJ_RE_BUS:10,OJ_RE_ABRT:11,OJ_RE_UNKNOWN:12,OJ_RF:13,OJ_SE:14,OJ_RE_JAVA:15,OJ_JUDGING:16,OJ_RUNNING:17,OJ_REJUDGING:18};d={PUBLIC:0,PRIVATE:1,DIY:2,INVITED:3};n={PENDING:"Pending",RUNNING:"Running",ENDED:"Ended"};v={NORMAL:"0",ADMIN:"1",CONSTANT:"2"};l={NONE:0,PASS:1,FAIL:2};w=function(H,F){var G,I,E;G=g(H);I=G.attr("email");E="http://www.gravatar.com/avatar/"+(hex_md5(I))+".jpg?"+(F.size?"s="+F.size+"&":"")+""+(F.rating?"r="+F.rating+"&":"")+""+(F.image?"d="+encodeURIComponent(F.image):"");G.attr("src",E);return H};g=jQuery;g.fn.setAvatar=function(F){var E,G=this;E={size:40,image:"retro",rating:"pg"};g.extend(E,F);return this.each(function(I,H){return w(H,E)})};C=function(E,F,G){return g.ajax({type:"POST",url:E,dataType:"json",contentType:"application/json",data:JSON.stringify(F),success:G})};t=function(F,E){return Object.merge(F,E,false,function(I,H,G){if(H.constructor===Array){H.add(G)}else{H=G}return H})};i=function(E){var F;F=window.open(E,"_blank");return F.focus()};g=jQuery;g.fn.getCursorPosition=function(){if(this.lengh===0){return -1}return g(this).getSelectionStart()};g.fn.setCursorPosition=function(E){if(this.lengh===0){return this}return g(this).setSelection(E,E)};g.fn.getSelection=function(){var F,E;if(this.lengh===0){return -1}E=g(this).getSelectionStart();F=g(this).getSelectionEnd();return this[0].value.substring(E,F)};g.fn.getSelectionStart=function(){var E,G,F;if(this.lengh===0){return -1}E=this[0];G=E.value.length;if(E.createTextRange){F=document.selection.createRange().duplicate();F.moveEnd("character",E.value.length);if(F.text===""){G=E.value.length}G=E.value.lastIndexOf(F.text)}else{if(typeof E.selectionStart!=="undefined"){G=E.selectionStart}}return G};g.fn.getSelectionEnd=function(){var E,G,F;if(this.lengh===0){return -1}E=this[0];G=E.value.length;if(E.createTextRange){F=document.selection.createRange().duplicate();F.moveStart("character",-E.value.length);if(F.text===""){G=E.value.length}G=E.value.lastIndexOf(F.text)}else{if(typeof E.selectionEnd!=="undefined"){G=E.selectionEnd}}return G};g.fn.setSelection=function(G,H){var F,E;if(this.lengh===0){return this}F=this[0];if(F.createTextRange){E=F.createTextRange();E.collapse(true);E.moveEnd("character",H);E.moveStart("character",G);E.select()}else{if(F.setSelectionRange){F.focus();F.setSelectionRange(G,H)}}return this};g.fn.insertAfterCursor=function(H,G){var F,E;if(this.length===0){return this}E=this.getCursorPosition();F=this.val();F=F.insert(H,E);this.val(F);return this.setCursorPosition(E+H.length+G)};s=8;z=function(E){if(E>9){return""+E}else{return"0"+E}};q=function(E,G,F){return""+E+"/"+(z(G+1))+"."+F};y=function(F,I,H){var E,G;E="";H.times(function(J){if(J%s===0){if(J>0){E+="</tr>"}E+="<tr>"}return E+='<td value="!['+(J+1)+"]("+(q(F,J,I))+')">\n  <span><img src="'+(q(F,J,I))+'" class="img-rounded" style="width: 50px; height: 50px"/></span>\n</td>'});E+="</tr>";G='<table class="table table-bordered table-condensed">\n  <tbody>\n    '+E+"\n  </tbody>\n</table>";return G};g=jQuery;g.fn.getFormValue=function(){var F,G,E;F=g(this);G=function(H){return F.attr("type")===H||F[0].localName===H};if(G("radio")){E=g(":radio[name='"+(F.attr("name"))+"']:checked").val();if(E==="all"){E=void 0}return E}else{if(G("select")){E=F.val();if(E===-1){E=void 0}return E}else{return F.val()}}};g.fn.getFormData=function(){var E,F=this;E={};this.each(function(H,I){var P,M,G,K,O,L,N,J;K=["submit","reset","button","image","file"];P=g(I);G=P.find(":input");J=[];for(L=0,N=G.length;L<N;L++){O=G[L];M=g(O);if(K.none(M.attr("type"))){J.push(E[M.attr("name")]=M.getFormValue())}else{J.push(void 0)}}return J});return E};g.fn.setFormValue=function(G){var E,F;E=g(this);F=function(H){return E.attr("type")===H||E[0].localName===H};if(F("radio")){if(G===void 0){G="all"}if(E.attr("value")===G){return E.attr("checked",true)}else{return E.attr("checked",false)}}else{if(F("select")){if(G===void 0){G=-1}return E.val(G)}else{return E.val(G)}}};g.fn.setFormData=function(E){var F=this;return this.each(function(H,I){var P,M,G,K,O,L,N,J;K=["submit","reset","button"];P=g(I);G=P.find(":input");J=[];for(L=0,N=G.length;L<N;L++){O=G[L];M=g(O);if(K.none(M.attr("type"))){J.push(M.setFormValue(E[M.attr("name")]))}else{J.push(void 0)}}return J})};g.fn.resetFormData=function(){var E=this;return this.each(function(G,H){var O,L,F,J,N,K,M,I;J=["submit","reset","button"];O=g(H);F=O.find(":input");I=[];for(K=0,M=F.length;K<M;K++){N=F[K];L=g(N);if(J.none(L.attr("type"))){I.push(L.setFormValue(void 0))}else{I.push(void 0)}}return I})};g.fn.formValidate=function(I){var H,F,G,E,J=this;G={result:{result:"success"},onSuccess:function(){},onFail:function(){}};g.extend(G,I);E=G.result;F=false;if(E.result===null){alert("Unknown exception.")}else{if(E.result==="error"){alert(E.error_msg)}else{if(E.result==="success"){G.onSuccess();F=true}else{if(E.result==="field_error"){H=g(this);E.field.each(function(L){var M,K;K=H.find(":input[name='"+L.field+"']");if(K&&K.length>0){K=g(K.first());M=K.closest("div.form-group");return M.tooltip({trigger:"click",placement:"bottom",title:L.defaultMessage}).tooltip("show")}})}else{alert("Unknown exception.")}}}}if(!F){return G.onFail()}};g=jQuery;g.fn.unescapePre=function(){var E=this;return this.each(function(I,G){var F,H;F=g(G);H=("<pre>"+F[0].innerHTML+"</pre>").unescapeHTML();return F.replaceWith(g("<div>"+H+"</div>"))})};g.fn.unescapeCode=function(){var E=this;return this.each(function(I,G){var F,H;F=g(G);H="<code>"+(F[0].innerHTML.unescapeHTML())+"</code>";return F.replaceWith(H)})};g.fn.renderTable=function(){var E=this;return this.each(function(H,G){var F;F=g(G);return F.addClass("table").addClass("table-bordered").addClass("table-condensed").addClass("cdoj-markdown-table")})};g.fn.renderImage=function(){var E=this;return this.each(function(H,G){var F;return F=g(G)})};g.fn.markdown=function(){var E=this;return this.each(function(J,H){var G,F,I;G=g(H);I=G.html().trim().replace("<textarea>","").replace("</textarea>","").replace("<TEXTAREA>","").replace("</TEXTAREA>","").trim();F=g(marked(I));G.empty().append(F);G.find("code").unescapeCode();G.find("pre").unescapePre();G.find("table").renderTable();return G.find("img").renderImage()})};g=jQuery;g.fn.mathjax=function(){var E=this;MathJax.Hub.Config({tex2jax:{inlineMath:[["$","$"],["\\[","\\]"]]}});return this.each(function(G,F){return MathJax.Hub.Queue(["Typeset",MathJax.Hub,F])})};g=jQuery;g.fn.prettify=function(){var E=this;return this.find("pre").each(function(I,G){var F,H;F=g(G);if(F.attr("type")!=="no-prettify"){H=prettyPrintOne(F[0].innerText.escapeHTML());return F.empty().append(H)}})};B=function(){g('[type="markdown"]').markdown();MathJax.Hub.Config({tex2jax:{inlineMath:[["$","$"],["\\[","\\]"]]}});MathJax.Hub.Queue(["Typeset",MathJax.Hub]);return g(document.body).prettify()};u=function(){var F,E;F=location.search;F=F.substr(F.indexOf("?")+1);F=F.split("&");E={};F.each(function(G,H){G=G.split("=");if(G.length===2){return E[G[0]]=G[1]}});return E};h=(function(){function E(F){this.options=F;this.element=this.options.element;if(this.element===null||this.element.length===0){return null}this.createTextarea();this.toolbar()}E.prototype.escape=function(F){return F};E.prototype.createTextarea=function(){var F,G;F=this.element[0].innerHTML.trim();this.element.empty();G='<div class="panel panel-default">\n  <div class="panel-heading" id="flandre-heading">\n    <div class="btn-toolbar" role="toolbar">\n      <div class="btn-group">\n        <button type="button" class="btn btn-default btn-sm" id="tool-preview">Preview</button>\n      </div>\n      <div class="btn-group flandre-tools">\n        <a class="btn btn-default btn-sm" id="tool-emotion"><i class="fa fa-smile-o"></i></a>\n        <a class="btn btn-default btn-sm" id="tool-picture"><i class="fa fa-picture-o"></i></a>\n      </div>\n    </div>\n  </div>\n  <textarea class="tex2jax_ignore form-control" id="flandre-editor">'+(this.escape(F))+'</textarea>\n  <div id="flandre-preview"></div>\n</div>';return this.element.append(G)};E.prototype.toolbar=function(){var L,J,N,G,P,I,M,H,O,F,K=this;L=this.element.find("#flandre-editor");M=this.element.find("#flandre-preview");P=this.options;L.elastic();F=this.element.find("#tool-preview");F.click(function(S){var Q,R,T;Q=g(S.currentTarget);R=Q.hasClass("active");L.css("display","none");M.css("display","none");if(R){L.css("display","block");K.element.find(".flandre-tools").css("display","block")}else{T=L.val().escapeHTML();M.empty().append(T);M.markdown();M.prettify();M.mathjax();M.css("display","block");K.element.find(".flandre-tools").css("display","none")}return Q.button("toggle")});H=this.element.find("#tool-emotion");N="emotion-modal-"+(this.element.attr("id"));G='<div class="modal fade" id="'+N+'" tabindex="-1" role="dialog" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title">\n          <ul class="nav nav-pills">\n            <li class="active"><a href="#emotion-brd" data-toggle="tab">BRD</a></li>\n          </ul>\n        </h4>\n      </div>\n      <div class="modal-body">\n        <div id="emotion-dialog" style="width: auto;" value="false">\n          <div class="tab-content">\n            <div class="tab-pane active" id="emotion-brd">\n              '+(y("/plugins/cdoj/img/emotion/brd","gif",40))+"\n            </div>\n          </div>\n        </div>\n      </div>\n    </div><!-- /.modal-content -->\n  </div><!-- /.modal-dialog -->\n</div><!-- /.modal -->";g(document.body).append(G);J=g("#"+N);H.click(function(){return J.modal("show")});J.on("shown.bs.modal",function(){var Q=this;return J.find("#emotion-dialog").find("td").on("click",function(T){var R,S;R=g(T.currentTarget);S=R.attr("value");L.insertAfterCursor(S,0);return J.modal("hide")})});O=this.element.find("#tool-picture");return I=new qq.FineUploaderBasic({button:O[0],request:{endpoint:P.picture.uploadUrl,inputName:"uploadFile"},validation:{allowedExtensions:["jpeg","jpg","gif","png"],sizeLimit:10*1024*1024},multiple:false,callbacks:{onComplete:function(T,S,R){var Q;if(R.success==="true"){Q="!["+R.uploadedFile+"]("+R.uploadedFileUrl+")";return L.insertAfterCursor(Q,0)}else{return console.log(R)}}}})};E.prototype.getText=function(){return this.element.find("#flandre-editor").val()};return E})();g=jQuery;g.fn.flandre=function(E){var F;if(E!==void 0){E.element=g(this)}else{E={element:g(this)}}F=new h(E);return F};b=(function(){function E(H){var I,L,G,F,J,K=this;this.father=H;this.search=this.father.searchGroup;J=this.father.options.condition;G=this.search.find("#condition");L=G.find("#search-button");I=G.find("#reset-button");L.click(function(){var M;M=Object.merge(J,G.getFormData());K.father.options.condition=M;K.father.refresh(M);K.close();return false});I.click(function(){G.resetFormData();return false});F=G.find("#rejudge-button");if(F.length>0){F.click(function(){var M;M=Object.merge(J,G.getFormData());C("/status/count",M,function(N){if(N.result==="success"){if(confirm("Rejudge all "+N.count+" records")){return C("/status/rejudge",M,function(O){if(O.result==="success"){return alert("Done!")}else{return alert(O.error_msg)}})}}else{return alert(N.error_msg)}});K.father.options.condition=M;K.father.refresh(M);K.close();return false})}}E.prototype.set=function(G){var F;F=this.search.find("#condition");return F.setFormData(G)};E.prototype.close=function(){var F;F=this.search.find("#advanced");return F.dropdown("toggle")};return E})();k=(function(){function E(G){var H,F;this.options=G;this.listContainer=this.options.listContainer;this.searchGroup=this.listContainer.find("#advance-search");this.searchModule=new b(this);this.pageInfo=this.listContainer.find("#page-info");this.refreshLock=0;H=u();this.searchModule.set(H);this.options.condition=t(this.options.condition,H);this.refresh(this.options.condition);F=this;if(this.options.autoRefresh===true){setInterval(function(){return F.triggerRefresh()},this.options.refreshInterval===void 0?1000:this.options.refreshInterval)}}E.prototype.triggerRefresh=function(){return this.refresh(this.options.condition)};E.prototype.refresh=function(G){var F=this;if(this.refreshLock===0){this.refreshLock=1;this.list=this.listContainer.find("#list-container");C(this.options.requestUrl,G,function(H){F.pageInfo.empty();if(H.pageInfo!==void 0){F.pageInfo.append(H.pageInfo);F.pageInfo.find("a").click(function(J){var I;I=g(J.currentTarget);if(I.attr("href")===void 0){return false}G.currentPage=I.attr("href");F.refresh(G);return false})}F.list.empty();H.list.each(function(I){return F.list.append(F.options.formatter(I))});if(F.options.after!==void 0){F.options.after()}return F.refreshLock=0})}};return E})();m=function(){var F,G,J,L,K,E,P,O,M,H,N,I;G=g("#cdoj-navbar");F=g("#cdoj-container");L=G.find("#cdoj-user");J=G.find("#cdoj-navbar-menu");E=F.find("#mzry1992-header");K=F.find("#mzry1992-container");if(E.length!==0&&K.length!==0){K.css("margin-top",E.outerHeight())}P=window.location.pathname;O="home";I=["problem","contest","status","user","admin"];for(H=0,N=I.length;H<N;H++){M=I[H];if(P.startsWith("/"+M+"/")){O=M}}return J.find("#menu-item-"+O).addClass("cdoj-menu-selected")};o=function(){var H,F,E,G,I=this;H=g("#article-editor");if(H.length>0){F=g("#article-editor-title").attr("value");G=["content"];E=[];G.each(function(J,K){return E.push({id:J,editor:g("#"+J).flandre({picture:{uploadUrl:"/picture/uploadPicture/article/"+F}})})});return g("#submit").click(function(){var J;J={sampleInput:g("textarea#sample-input").val(),sampleOutput:g("textarea#sample-output").val(),title:g("#title").val(),source:g("#source").val()};E.each(function(K,L){return J[K.id]=K.editor.getText()});if(F==="new"){J.action="new"}else{J.action="edit";J.articleId=F}C("/article/edit",J,function(K){if(K.result==="success"){return window.location.href="/article/show/"+K.articleId}else{if(K.result==="field_error"){return alert("Please enter a valid title!")}else{return alert(K.error_msg)}}});return false})}};j=function(){var H,K,P,O,I,L,Q,J,E,G,M,F,N=this;H=g("#contest-show");if(H.length>0){P=g("#contest-title").attr("value");E=g("#contest-current-time").attr("value");F=g("#contest-start-time").attr("value");M=g("#contest-end-time").attr("value");J=g("#contest-type").attr("value");I=g("#contest-status").attr("value");Q=g("#contest-show-tab");O=g("#contest-problem-summary");L=Q.find("a[href='#tab-contest-status']");K=g("#contest-progress-bar");if(I===n.PENDING){}else{if(I===n.RUNNING){}else{if(I===n.ENDED){K.addClass("progress-bar-success").css("width","100%")}}}O.find("a").click(function(U){var S,R,T;S=g(U.currentTarget);R=S.attr("href");if(R.startsWith("#")){T=Q.find("a[href='"+R+"']");if(T.length>0){T.tab("show")}return false}else{return true}});G=e();if(G.userLogin){g("#submit-code").click(function(){var R;R={codeContent:g("#code-content").val(),languageId:g(":radio[name='language']:checked").attr("value"),contestId:P,problemId:g("#problem-selector").find("option:selected").val()};C("/status/submit",R,function(S){if(S.result==="error"){return alert(S.error_msg)}else{if(S.result==="success"){return L.tab("show")}}});return false})}initContestStatusList(P)}};c=function(){var E,F;E=g("#contest-list");if(E.length!==0){return F=new k({listContainer:E,requestUrl:"/contest/search",condition:{currentPage:null,startId:void 0,endId:void 0,keyword:void 0,title:void 0,orderFields:"id",orderAsc:"false"},formatter:function(H){var G;console.log(H);this.user=e();G=function(){var I;I="";if(this.user.userLogin&&this.user.currentUserType===v.ADMIN){I+='<div class="btn-toolbar" role="toolbar">\n  <div class="btn-group">\n    <button type="button" class="btn btn-default btn-sm contest-visible-state-editor" contest-id="'+H.contestId+'" visible="'+H.isVisible+'">\n      <i class="'+(H.isVisible?"fa fa-eye":"fa fa-eye-slash")+'"></i>\n    </button>\n    <button type="button" class="btn btn-default btn-sm contest-editor" contest-id="'+H.contestId+'"><i class="fa fa-pencil"></i></button>\n  </div>\n</div>'}return I};return'<div class="col-md-12">\n  <div class="panel panel-default">\n    <div class="panel-heading">\n      <h3 class="panel-title">\n        <a href="/contest/show/'+H.contestId+'" target="_blank">'+H.title+"</a>\n        <span class='pull-right admin-span'>"+(G())+'</span>\n      </h3>\n    </div>\n    <div class="panel-body">\n      <span>'+(Date.create(H.time).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"))+"--"+(Date.create(H.time+H.length*1000).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"))+"</span>\n    </div>\n  </div>\n</div>"},after:function(){var G=this;this.user=e();if(this.user.userLogin&&this.user.currentUserType===v.ADMIN){g(".contest-editor").click(function(I){var H;H=g(I.currentTarget);i("/contest/editor/"+(H.attr("contest-id")));return false});return g(".contest-visible-state-editor").click(function(I){var H,K,J;H=g(I.currentTarget);J=H.attr("visible")==="true"?true:false;K="/contest/operator/"+(H.attr("contest-id"))+"/isVisible/"+(!J);g.post(K,function(L){if(L.result==="success"){J=!J;H.attr("visible",J);return H.empty().append('<i class="'+(J?"fa fa-eye":"fa fa-eye-slash")+'"></i>')}});return false})}}})}};r=function(){var I,G,E,F,H=this;G=g("#problem-data-editor");if(G.length>0){F=G.find("#problem-data-editor-title").attr("value");G.find("#submit").click(function(){var J,K;J=G.find("#problem-data-form");K=J.getFormData();K.problemId=F;C("/problem/updateProblemData",K,function(L){return J.formValidate({result:L,onSuccess:function(){return window.location.href="/problem/show/"+F}})});return false});I=G.find("#problem-data-uploader");return E=new qq.FineUploaderBasic({button:I[0],request:{endpoint:"/problem/uploadProblemDataFile/"+F,inputName:"uploadFile"},validation:{allowedExtensions:["zip"],sizeLimit:100*1000*1000},multiple:false,callbacks:{onComplete:function(M,L,K){var J;if(K.success==="true"){J='<div class="alert alert-success">\n  Total data: '+K.total+"\n</div>"}else{J='<div class="alert alert-danger">\n  '+K.error+"\n</div>"}return G.find("#uploader-info").empty().append(J)},onProgress:function(N,M,K,L){var J;J='<div class="alert alert-info">\n  '+K+" bytes of "+L+"\n</div>";return G.find("#uploader-info").empty().append(J)},onError:function(L,K,J){return alert(J)}}})}};x=function(){var H,F,E,G,I=this;H=g("#problem-editor");if(H.length>0){F=g("#problem-editor-title").attr("value");G=["description","input","output","hint"];E=[];G.each(function(J,K){return E.push({id:J,editor:g("#"+J).flandre({picture:{uploadUrl:"/picture/uploadPicture/problem/"+F}})})});return g("#submit").click(function(){var J;J={sampleInput:g("textarea#sample-input").val(),sampleOutput:g("textarea#sample-output").val(),title:g("#title").val(),source:g("#source").val()};E.each(function(K,L){return J[K.id]=K.editor.getText()});if(F==="new"){J.action="new"}else{J.action="edit";J.problemId=F}C("/problem/edit",J,function(K){if(K.result==="success"){return window.location.href="/problem/show/"+K.problemId}else{if(K.result==="field_error"){return alert("Please enter a valid title!")}else{return alert(K.error_msg)}}});return false})}};a=function(){var F,E,H,G,I=this;if(g("#problem-show").length>0){F=g("#currentUser");this.userLogin=F.length!==0?true:false;H=g("#problem-title").attr("value");if(this.userLogin){g("#submit-code").click(function(){var J;J={codeContent:g("#code-content").val(),languageId:g(":radio[name='language']:checked").attr("value"),contestId:null,problemId:H};C("/status/submit",J,function(K){if(K.result==="error"){return alert(K.error_msg)}else{if(K.result==="success"){return window.location.href="/status/list"}}});return false})}E=g("#cdoj-best-solutions");if(E.length!==0){return G=new k({listContainer:E,requestUrl:"/status/search",condition:{currentPage:null,countPerPage:10,startId:void 0,endId:void 0,userName:void 0,problemId:H,languageId:void 0,contestId:void 0,result:"OJ_AC",orderFields:"timeCost,memoryCost,Length,statusId",orderAsc:"true,true,true,true"},formatter:function(M){var J,K,L,N;L=function(P,O){return'<td style="text-align: center;">'+O+' KB</td>\n<td style="text-align: center;">'+P+" MS</td>"};J=e();N=function(P,O,R,Q){if(O===7){if(J.userLogin&&(J.currentUserType==="1"||J.currentUser===Q)){return'<a href="#" value="'+R+'" class="ce-link">'+P+"</a>"}else{return P}}else{return P}};K=function(O,R,Q,P){if(J.userLogin&&(J.currentUserType==="1"||J.currentUser===P)){return'<a href="#" value="'+Q+'" class="code-link">'+O+" B</a>"}else{return""+O+" B"}};return'<tr>\n  <td style="text-align: center;">'+M.statusId+'</td>\n  <td style="text-align: center;"><a href="/user/center/'+M.userName+'" target="_blank">'+M.userName+"</a></td>\n\n  "+(M.returnTypeId===1?L(M.timeCost,M.memoryCost):"<td></td><td></td>")+'\n\n  <td style="text-align: center;">'+M.language+'</td>\n\n  <td style="text-align: center;">'+(K(M.length,M.language,M.statusId,M.userName))+'</td>\n  <td style="text-align: center;">'+(Date.create(M.time).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"))+"</td>\n  <td></td>\n</tr>"},after:function(){var J=this;return g(".code-link").click(function(L){var K,M;K=g(L.currentTarget);M=K.attr("value");g.post("/status/info/"+M,function(P){var N,O;O="";if(P.result==="success"){O=P.code}else{O=P.error_msg}O=O.trim().escapeHTML();console.log(O);N=g("#code-modal");N.find(".modal-body").empty().append("<pre>"+O+"</pre>");N.find(".modal-body").prettify();return N.modal("toggle")});return false})}})}}};A=function(){var E=this;g(".dropdown-menu").find("form").click(function(F){return F.stopPropagation()});return g("img[type='avatar']").each(function(H,G){var F;F=g(G);return F.setAvatar({size:F.width()?F.width():void 0})})};e=function(){var E;E=g("#currentUser");this.userLogin=E.length!==0?true:false;if(this.userLogin){this.currentUser=E[0].innerHTML.trim();this.currentUserType=E.attr("type");return{userLogin:true,currentUser:this.currentUser,currentUserType:this.currentUserType}}else{return{userLogin:false}}};D=function(){var E=this;this.user=e();if(this.user.userLogin){return g("#cdoj-profile-edit-button").click(function(){var G,F;G=g("#cdoj-profile-edit-form");F=G.getFormData();if(F.newPassword===""){delete F.newPassword}if(F.newPasswordRepeat===""){delete F.newPasswordRepeat}C("/user/edit",F,function(H){return G.formValidate({result:H,onSuccess:function(){return window.location.reload()}})});return false})}};f=function(){var F,E;F=g("#user-list");if(F.length!==0){return E=new k({listContainer:F,requestUrl:"/user/search",condition:{currentPage:null,startId:void 0,endId:void 0,userName:void 0,type:void 0,school:void 0,departmentId:void 0,orderFields:"solved,tried,id",orderAsc:"false,false,true"},formatter:function(H){var G;G=function(){var I;I="";if(this.user.userLogin&&this.user.currentUserType===v.ADMIN){I+='<div class="btn-toolbar" role="toolbar" style="position: absolute; top: 12px; right: 30px;">\n      <div class="btn-group">\n        <button type="button" class="btn btn-default btn-sm admin-profile-edit" user-name="'+H.userName+'">\n          <i class="fa fa-pencil"></i>\n        </button>\n      </div>\n    </div>'}return I};return'<div class="col-lg-6">\n  <div class="panel panel-default">\n    <div class="panel-body">\n      <div class="media">\n        <a class="pull-left" href="#">\n          <img id="cdoj-users-avatar" email="'+H.email+'"/>\n        </a>\n        <div class="media-body">\n          <h4 class="media-heading"><a href="/user/center/'+H.userName+'" target="_blank">'+H.nickName+" <small>"+H.userName+'</small></a></h4>\n          <span><i class="fa fa-map-marker"></i>'+H.school+'</span>\n          <br/>\n          <span><a href="/status/list?userName='+H.userName+'" target="_blank">'+H.solved+"/"+H.tried+"</a></span>\n          "+(G())+'\n        </div>\n      </div>\n    </div>\n    <div class="panel-footer" style="overflow: hidden;white-space: nowrap;text-overflow: ellipsis;">Motto: '+H.motto+"</div>\n  </div>\n</div>"},after:function(){var G,I,H,J=this;g("img#cdoj-users-avatar").setAvatar({size:64});H=g("#cdoj-admin-profile-edit-modal");G=g("#cdoj-admin-profile-edit-form");I=g("#cdoj-admin-profile-edit-form-onloading");g(".admin-profile-edit").click(function(M){var K,L;K=g(M.currentTarget);H.modal();L=K.attr("user-name");g.post("/user/secretProfile/"+L,function(N){console.log(N);G.setFormData(N.user);G.css("display","block");return I.css("display","none")});H.on("hidden.bs.modal",function(){G.css("display","none");return I.css("display","block")});return false});return g("#cdoj-admin-profile-edit-button").click(function(){var K;K=G.getFormData();if(K.newPassword===""){delete K.newPassword}if(K.newPasswordRepeat===""){delete K.newPasswordRepeat}C("/user/adminEdit",K,function(L){return G.formValidate({result:L,onSuccess:function(){H.modal("hide");return E.triggerRefresh()}})});return false})}})}};g=jQuery;g(function(){A();m();f();a();x();r();j();o();return B()})}).call(this);