(function(){var f,u,k,m,d,g,j,o,b,v,x,r,y,p,t,n,c,i,l,q,w,a,z,e,s,B,h,A;o={OJ_WAIT:0,OJ_AC:1,OJ_PE:2,OJ_TLE:3,OJ_MLE:4,OJ_WA:5,OJ_OLE:6,OJ_CE:7,OJ_RE_SEGV:8,OJ_RE_FPE:9,OJ_RE_BUS:10,OJ_RE_ABRT:11,OJ_RE_UNKNOWN:12,OJ_RF:13,OJ_SE:14,OJ_RE_JAVA:15,OJ_JUDGING:16,OJ_RUNNING:17,OJ_REJUDGING:18};d={PUBLIC:0,PRIVATE:1,DIY:2,INVITED:3};m={PENDING:"Pending",RUNNING:"Running",ENDED:"Ended"};u={NORMAL:"0",ADMIN:"1",CONSTANT:"2"};k={NONE:0,PASS:1,FAIL:2};v=function(F,D){var E,G,C;E=f(F);G=E.attr("email");C="http://www.gravatar.com/avatar/"+(hex_md5(G))+".jpg?"+(D.size?"s="+D.size+"&":"")+""+(D.rating?"r="+D.rating+"&":"")+""+(D.image?"d="+encodeURIComponent(D.image):"");E.attr("src",C);return F};f=jQuery;f.fn.setAvatar=function(D){var C,E=this;C={size:40,image:"retro",rating:"pg"};f.extend(C,D);return this.each(function(G,F){return v(F,C)})};B=function(C,D,E){return f.ajax({type:"POST",url:C,dataType:"json",contentType:"application/json",data:JSON.stringify(D),success:E})};s=function(D,C){return Object.merge(D,C,false,function(G,F,E){if(F.constructor===Array){F.add(E)}else{F=E}return F})};h=function(C){var D;D=window.open(C,"_blank");return D.focus()};f=jQuery;f.fn.getCursorPosition=function(){if(this.lengh===0){return -1}return f(this).getSelectionStart()};f.fn.setCursorPosition=function(C){if(this.lengh===0){return this}return f(this).setSelection(C,C)};f.fn.getSelection=function(){var D,C;if(this.lengh===0){return -1}C=f(this).getSelectionStart();D=f(this).getSelectionEnd();return this[0].value.substring(C,D)};f.fn.getSelectionStart=function(){var C,E,D;if(this.lengh===0){return -1}C=this[0];E=C.value.length;if(C.createTextRange){D=document.selection.createRange().duplicate();D.moveEnd("character",C.value.length);if(D.text===""){E=C.value.length}E=C.value.lastIndexOf(D.text)}else{if(typeof C.selectionStart!=="undefined"){E=C.selectionStart}}return E};f.fn.getSelectionEnd=function(){var C,E,D;if(this.lengh===0){return -1}C=this[0];E=C.value.length;if(C.createTextRange){D=document.selection.createRange().duplicate();D.moveStart("character",-C.value.length);if(D.text===""){E=C.value.length}E=C.value.lastIndexOf(D.text)}else{if(typeof C.selectionEnd!=="undefined"){E=C.selectionEnd}}return E};f.fn.setSelection=function(E,F){var D,C;if(this.lengh===0){return this}D=this[0];if(D.createTextRange){C=D.createTextRange();C.collapse(true);C.moveEnd("character",F);C.moveStart("character",E);C.select()}else{if(D.setSelectionRange){D.focus();D.setSelectionRange(E,F)}}return this};f.fn.insertAfterCursor=function(F,E){var D,C;if(this.length===0){return this}C=this.getCursorPosition();D=this.val();D=D.insert(F,C);this.val(D);return this.setCursorPosition(C+F.length+E)};r=8;y=function(C){if(C>9){return""+C}else{return"0"+C}};p=function(C,E,D){return""+C+"/"+(y(E+1))+"."+D};x=function(D,G,F){var C,E;C="";F.times(function(H){if(H%r===0){if(H>0){C+="</tr>"}C+="<tr>"}return C+='<td value="!['+(H+1)+"]("+(p(D,H,G))+')">\n  <span><img src="'+(p(D,H,G))+'" class="img-rounded" style="width: 50px; height: 50px"/></span>\n</td>'});C+="</tr>";E='<table class="table table-bordered table-condensed">\n  <tbody>\n    '+C+"\n  </tbody>\n</table>";return E};f=jQuery;f.fn.getFormValue=function(){var D,E,C;D=f(this);E=function(F){return D.attr("type")===F||D[0].localName===F};if(E("radio")){C=f(":radio[name='"+(D.attr("name"))+"']:checked").val();if(C==="all"){C=void 0}return C}else{if(E("select")){C=D.val();if(C===-1){C=void 0}return C}else{return D.val()}}};f.fn.getFormData=function(){var C,D=this;C={};this.each(function(F,G){var N,K,E,I,M,J,L,H;I=["submit","reset","button","image","file"];N=f(G);E=N.find(":input");H=[];for(J=0,L=E.length;J<L;J++){M=E[J];K=f(M);if(I.none(K.attr("type"))){H.push(C[K.attr("name")]=K.getFormValue())}else{H.push(void 0)}}return H});return C};f.fn.setFormValue=function(E){var C,D;C=f(this);D=function(F){return C.attr("type")===F||C[0].localName===F};if(D("radio")){if(E===void 0){E="all"}if(C.attr("value")===E){return C.attr("checked",true)}else{return C.attr("checked",false)}}else{if(D("select")){if(E===void 0){E=-1}return C.val(E)}else{return C.val(E)}}};f.fn.setFormData=function(C){var D=this;return this.each(function(F,G){var N,K,E,I,M,J,L,H;I=["submit","reset","button"];N=f(G);E=N.find(":input");H=[];for(J=0,L=E.length;J<L;J++){M=E[J];K=f(M);if(I.none(K.attr("type"))){H.push(K.setFormValue(C[K.attr("name")]))}else{H.push(void 0)}}return H})};f.fn.resetFormData=function(){var C=this;return this.each(function(E,F){var M,J,D,H,L,I,K,G;H=["submit","reset","button"];M=f(F);D=M.find(":input");G=[];for(I=0,K=D.length;I<K;I++){L=D[I];J=f(L);if(H.none(J.attr("type"))){G.push(J.setFormValue(void 0))}else{G.push(void 0)}}return G})};f.fn.formValidate=function(G){var F,D,E,C,H=this;E={result:{result:"success"},onSuccess:function(){},onFail:function(){}};f.extend(E,G);C=E.result;D=false;if(C.result===null){alert("Unknown exception.")}else{if(C.result==="error"){alert(C.error_msg)}else{if(C.result==="success"){E.onSuccess();D=true}else{if(C.result==="field_error"){F=f(this);C.field.each(function(J){var K,I;I=F.find(":input[name='"+J.field+"']");if(I&&I.length>0){I=f(I.first());K=I.closest("div.form-group");return K.tooltip({trigger:"click",placement:"bottom",title:J.defaultMessage}).tooltip("show")}})}else{alert("Unknown exception.")}}}}if(!D){return E.onFail()}};f=jQuery;f.fn.unescapePre=function(){var C=this;return this.each(function(G,E){var D,F;D=f(E);F=("<pre>"+D[0].innerHTML+"</pre>").unescapeHTML();return D.replaceWith(f("<div>"+F+"</div>"))})};f.fn.unescapeCode=function(){var C=this;return this.each(function(G,E){var D,F;D=f(E);F="<code>"+(D[0].innerHTML.unescapeHTML())+"</code>";return D.replaceWith(F)})};f.fn.renderTable=function(){var C=this;return this.each(function(F,E){var D;D=f(E);return D.addClass("table").addClass("table-bordered").addClass("table-condensed").addClass("cdoj-markdown-table")})};f.fn.renderImage=function(){var C=this;return this.each(function(F,E){var D;return D=f(E)})};f.fn.markdown=function(){var C=this;return this.each(function(H,F){var E,D,G;E=f(F);G=E.html().trim().replace("<textarea>","").replace("</textarea>","").replace("<TEXTAREA>","").replace("</TEXTAREA>","").trim();D=f(marked(G));E.empty().append(D);E.find("code").unescapeCode();E.find("pre").unescapePre();E.find("table").renderTable();return E.find("img").renderImage()})};f=jQuery;f.fn.mathjax=function(){var C=this;MathJax.Hub.Config({tex2jax:{inlineMath:[["$","$"],["\\[","\\]"]]}});return this.each(function(E,D){return MathJax.Hub.Queue(["Typeset",MathJax.Hub,D])})};f=jQuery;f.fn.prettify=function(){var C=this;return this.find("pre").each(function(G,E){var D,F;D=f(E);if(D.attr("type")!=="no-prettify"){F=prettyPrintOne(D[0].innerText.escapeHTML());return D.empty().append(F)}})};A=function(){f('[type="markdown"]').markdown();MathJax.Hub.Config({tex2jax:{inlineMath:[["$","$"],["\\[","\\]"]]}});MathJax.Hub.Queue(["Typeset",MathJax.Hub]);return f(document.body).prettify()};t=function(){var D,C;D=location.search;D=D.substr(D.indexOf("?")+1);D=D.split("&");C={};D.each(function(E,F){E=E.split("=");if(E.length===2){return C[E[0]]=E[1]}});return C};g=(function(){function C(D){this.options=D;this.element=this.options.element;if(this.element===null||this.element.length===0){return null}this.createTextarea();this.toolbar()}C.prototype.escape=function(D){return D};C.prototype.createTextarea=function(){var D,E;D=this.element[0].innerHTML.trim();this.element.empty();E='<div class="panel panel-default">\n  <div class="panel-heading" id="flandre-heading">\n    <div class="btn-toolbar" role="toolbar">\n      <div class="btn-group">\n        <button type="button" class="btn btn-default btn-sm" id="tool-preview">Preview</button>\n      </div>\n      <div class="btn-group flandre-tools">\n        <a class="btn btn-default btn-sm" id="tool-emotion"><i class="fa fa-smile-o"></i></a>\n        <a class="btn btn-default btn-sm" id="tool-picture"><i class="fa fa-picture-o"></i></a>\n      </div>\n    </div>\n  </div>\n  <textarea class="tex2jax_ignore form-control" id="flandre-editor">'+(this.escape(D))+'</textarea>\n  <div id="flandre-preview"></div>\n</div>';return this.element.append(E)};C.prototype.toolbar=function(){var J,H,L,E,N,G,K,F,M,D,I=this;J=this.element.find("#flandre-editor");K=this.element.find("#flandre-preview");N=this.options;J.elastic();D=this.element.find("#tool-preview");D.click(function(Q){var O,P,R;O=f(Q.currentTarget);P=O.hasClass("active");J.css("display","none");K.css("display","none");if(P){J.css("display","block");I.element.find(".flandre-tools").css("display","block")}else{R=J.val().escapeHTML();K.empty().append(R);K.markdown();K.prettify();K.mathjax();K.css("display","block");I.element.find(".flandre-tools").css("display","none")}return O.button("toggle")});F=this.element.find("#tool-emotion");L="emotion-modal-"+(this.element.attr("id"));E='<div class="modal fade" id="'+L+'" tabindex="-1" role="dialog" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title">\n          <ul class="nav nav-pills">\n            <li class="active"><a href="#emotion-brd" data-toggle="tab">BRD</a></li>\n          </ul>\n        </h4>\n      </div>\n      <div class="modal-body">\n        <div id="emotion-dialog" style="width: auto;" value="false">\n          <div class="tab-content">\n            <div class="tab-pane active" id="emotion-brd">\n              '+(x("/plugins/cdoj/img/emotion/brd","gif",40))+"\n            </div>\n          </div>\n        </div>\n      </div>\n    </div><!-- /.modal-content -->\n  </div><!-- /.modal-dialog -->\n</div><!-- /.modal -->";f(document.body).append(E);H=f("#"+L);F.click(function(){return H.modal("show")});H.on("shown.bs.modal",function(){var O=this;return H.find("#emotion-dialog").find("td").on("click",function(R){var P,Q;P=f(R.currentTarget);Q=P.attr("value");J.insertAfterCursor(Q,0);return H.modal("hide")})});M=this.element.find("#tool-picture");return G=new qq.FineUploaderBasic({button:M[0],request:{endpoint:N.picture.uploadUrl,inputName:"uploadFile"},validation:{allowedExtensions:["jpeg","jpg","gif","png"],sizeLimit:10*1024*1024},multiple:false,callbacks:{onComplete:function(R,Q,P){var O;if(P.success==="true"){O="!["+P.uploadedFile+"]("+P.uploadedFileUrl+")";return J.insertAfterCursor(O,0)}else{return console.log(P)}}}})};C.prototype.getText=function(){return this.element.find("#flandre-editor").val()};return C})();f=jQuery;f.fn.flandre=function(C){var D;if(C!==void 0){C.element=f(this)}else{C={element:f(this)}}D=new g(C);return D};b=(function(){function C(F){var G,J,E,D,H,I=this;this.father=F;this.search=this.father.searchGroup;H=this.father.options.condition;E=this.search.find("#condition");J=E.find("#search-button");G=E.find("#reset-button");J.click(function(){var K;K=Object.merge(H,E.getFormData());I.father.options.condition=K;I.father.refresh(K);I.close();return false});G.click(function(){E.resetFormData();return false});D=E.find("#rejudge-button");if(D.length>0){D.click(function(){var K;K=Object.merge(H,E.getFormData());B("/status/count",K,function(L){if(L.result==="success"){if(confirm("Rejudge all "+L.count+" records")){return B("/status/rejudge",K,function(M){if(M.result==="success"){return alert("Done!")}else{return alert(M.error_msg)}})}}else{return alert(L.error_msg)}});I.father.options.condition=K;I.father.refresh(K);I.close();return false})}}C.prototype.set=function(E){var D;D=this.search.find("#condition");return D.setFormData(E)};C.prototype.close=function(){var D;D=this.search.find("#advanced");return D.dropdown("toggle")};return C})();j=(function(){function C(E){var F,D;this.options=E;this.listContainer=this.options.listContainer;this.searchGroup=this.listContainer.find("#advance-search");this.searchModule=new b(this);this.pageInfo=this.listContainer.find("#page-info");this.refreshLock=0;F=t();this.searchModule.set(F);this.options.condition=s(this.options.condition,F);this.refresh(this.options.condition);D=this;if(this.options.autoRefresh===true){setInterval(function(){return D.triggerRefresh()},this.options.refreshInterval===void 0?1000:this.options.refreshInterval)}}C.prototype.triggerRefresh=function(){return this.refresh(this.options.condition)};C.prototype.refresh=function(E){var D=this;if(this.refreshLock===0){this.refreshLock=1;this.list=this.listContainer.find("#list-container");B(this.options.requestUrl,E,function(F){D.pageInfo.empty();if(F.pageInfo!==void 0){D.pageInfo.append(F.pageInfo);D.pageInfo.find("a").click(function(H){var G;G=f(H.currentTarget);if(G.attr("href")===void 0){return false}E.currentPage=G.attr("href");D.refresh(E);return false})}D.list.empty();F.list.each(function(G){return D.list.append(D.options.formatter(G))});if(D.options.after!==void 0){D.options.after()}return D.refreshLock=0})}};return C})();l=function(){var D,E,H,J,I,C,N,M,K,F,L,G;E=f("#cdoj-navbar");D=f("#cdoj-container");J=E.find("#cdoj-user");H=E.find("#cdoj-navbar-menu");C=D.find("#mzry1992-header");I=D.find("#mzry1992-container");if(C.length!==0&&I.length!==0){I.css("margin-top",C.outerHeight())}N=window.location.pathname;M="home";G=["problem","contest","status","user","admin"];for(F=0,L=G.length;F<L;F++){K=G[F];if(N.startsWith("/"+K+"/")){M=K}}return H.find("#menu-item-"+M).addClass("cdoj-menu-selected")};n=function(){var F,D,C,E,G=this;F=f("#article-editor");if(F.length>0){D=f("#article-editor-title").attr("value");E=["content"];C=[];E.each(function(H,I){return C.push({id:H,editor:f("#"+H).flandre({picture:{uploadUrl:"/picture/uploadPicture/article/"+D}})})});return f("#submit").click(function(){var H;H={sampleInput:f("textarea#sample-input").val(),sampleOutput:f("textarea#sample-output").val(),title:f("#title").val(),source:f("#source").val()};C.each(function(I,J){return H[I.id]=I.editor.getText()});if(D==="new"){H.action="new"}else{H.action="edit";H.articleId=D}B("/article/edit",H,function(I){if(I.result==="success"){return window.location.href="/article/show/"+I.articleId}else{if(I.result==="field_error"){return alert("Please enter a valid title!")}else{return alert(I.error_msg)}}});return false})}};i=function(){var F,I,N,M,G,J,O,H,C,E,K,D,L=this;F=f("#contest-show");if(F.length>0){N=f("#contest-title").attr("value");C=f("#contest-current-time").attr("value");D=f("#contest-start-time").attr("value");K=f("#contest-end-time").attr("value");H=f("#contest-type").attr("value");G=f("#contest-status").attr("value");O=f("#contest-show-tab");M=f("#contest-problem-summary");J=O.find("a[href='#tab-contest-status']");I=f("#contest-progress-bar");if(G===m.PENDING){}else{if(G===m.RUNNING){}else{if(G===m.ENDED){I.addClass("progress-bar-success").css("width","100%")}}}M.find("a").click(function(S){var Q,P,R;Q=f(S.currentTarget);P=Q.attr("href");if(P.startsWith("#")){R=O.find("a[href='"+P+"']");if(R.length>0){R.tab("show")}return false}else{return true}});E=getCurrentUser();if(E.userLogin){f("#submit-code").click(function(){var P;P={codeContent:f("#code-content").val(),languageId:f(":radio[name='language']:checked").attr("value"),contestId:N,problemId:f("#problem-selector").find("option:selected").val()};B("/status/submit",P,function(Q){if(Q.result==="error"){return alert(Q.error_msg)}else{if(Q.result==="success"){return J.tab("show")}}});return false})}initContestStatusList(N)}};c=function(){var C,D;C=f("#contest-list");if(C.length!==0){return D=new j({listContainer:C,requestUrl:"/contest/search",condition:{currentPage:null,startId:void 0,endId:void 0,keyword:void 0,title:void 0,orderFields:"id",orderAsc:"false"},formatter:function(F){var E;console.log(F);this.user=getCurrentUser();E=function(){var G;G="";if(this.user.userLogin&&this.user.currentUserType===u.ADMIN){G+='<div class="btn-toolbar" role="toolbar">\n  <div class="btn-group">\n    <button type="button" class="btn btn-default btn-sm contest-visible-state-editor" contest-id="'+F.contestId+'" visible="'+F.isVisible+'">\n      <i class="'+(F.isVisible?"fa fa-eye":"fa fa-eye-slash")+'"></i>\n    </button>\n    <button type="button" class="btn btn-default btn-sm contest-editor" contest-id="'+F.contestId+'"><i class="fa fa-pencil"></i></button>\n  </div>\n</div>'}return G};return'<div class="col-md-12">\n  <div class="panel panel-default">\n    <div class="panel-heading">\n      <h3 class="panel-title">\n        <a href="/contest/show/'+F.contestId+'" target="_blank">'+F.title+"</a>\n        <span class='pull-right admin-span'>"+(E())+'</span>\n      </h3>\n    </div>\n    <div class="panel-body">\n      <span>'+(Date.create(F.time).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"))+"--"+(Date.create(F.time+F.length*1000).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"))+"</span>\n    </div>\n  </div>\n</div>"},after:function(){var E=this;this.user=getCurrentUser();if(this.user.userLogin&&this.user.currentUserType===u.ADMIN){f(".contest-editor").click(function(G){var F;F=f(G.currentTarget);h("/contest/editor/"+(F.attr("contest-id")));return false});return f(".contest-visible-state-editor").click(function(G){var F,I,H;F=f(G.currentTarget);H=F.attr("visible")==="true"?true:false;I="/contest/operator/"+(F.attr("contest-id"))+"/isVisible/"+(!H);f.post(I,function(J){if(J.result==="success"){H=!H;F.attr("visible",H);return F.empty().append('<i class="'+(H?"fa fa-eye":"fa fa-eye-slash")+'"></i>')}});return false})}}})}};q=function(){var G,E,C,D,F=this;E=f("#problem-data-editor");if(E.length>0){D=E.find("#problem-data-editor-title").attr("value");E.find("#submit").click(function(){var H,I;H=E.find("#problem-data-form");I=H.getFormData();I.problemId=D;B("/problem/updateProblemData",I,function(J){return H.formValidate({result:J,onSuccess:function(){return window.location.href="/problem/show/"+D}})});return false});G=E.find("#problem-data-uploader");return C=new qq.FineUploaderBasic({button:G[0],request:{endpoint:"/problem/uploadProblemDataFile/"+D,inputName:"uploadFile"},validation:{allowedExtensions:["zip"],sizeLimit:100*1000*1000},multiple:false,callbacks:{onComplete:function(K,J,I){var H;if(I.success==="true"){H='<div class="alert alert-success">\n  Total data: '+I.total+"\n</div>"}else{H='<div class="alert alert-danger">\n  '+I.error+"\n</div>"}return E.find("#uploader-info").empty().append(H)},onProgress:function(L,K,I,J){var H;H='<div class="alert alert-info">\n  '+I+" bytes of "+J+"\n</div>";return E.find("#uploader-info").empty().append(H)},onError:function(J,I,H){return alert(H)}}})}};w=function(){var F,D,C,E,G=this;F=f("#problem-editor");if(F.length>0){D=f("#problem-editor-title").attr("value");E=["description","input","output","hint"];C=[];E.each(function(H,I){return C.push({id:H,editor:f("#"+H).flandre({picture:{uploadUrl:"/picture/uploadPicture/problem/"+D}})})});return f("#submit").click(function(){var H;H={sampleInput:f("textarea#sample-input").val(),sampleOutput:f("textarea#sample-output").val(),title:f("#title").val(),source:f("#source").val()};C.each(function(I,J){return H[I.id]=I.editor.getText()});if(D==="new"){H.action="new"}else{H.action="edit";H.problemId=D}B("/problem/edit",H,function(I){if(I.result==="success"){return window.location.href="/problem/show/"+I.problemId}else{if(I.result==="field_error"){return alert("Please enter a valid title!")}else{return alert(I.error_msg)}}});return false})}};a=function(){var D,C,F,E,G=this;if(f("#problem-show").length>0){D=f("#currentUser");this.userLogin=D.length!==0?true:false;F=f("#problem-title").attr("value");if(this.userLogin){f("#submit-code").click(function(){var H;H={codeContent:f("#code-content").val(),languageId:f(":radio[name='language']:checked").attr("value"),contestId:null,problemId:F};B("/status/submit",H,function(I){if(I.result==="error"){return alert(I.error_msg)}else{if(I.result==="success"){return window.location.href="/status/list"}}});return false})}C=f("#cdoj-best-solutions");if(C.length!==0){return E=new j({listContainer:C,requestUrl:"/status/search",condition:{currentPage:null,countPerPage:10,startId:void 0,endId:void 0,userName:void 0,problemId:F,languageId:void 0,contestId:void 0,result:"OJ_AC",orderFields:"timeCost,memoryCost,Length,statusId",orderAsc:"true,true,true,true"},formatter:function(K){var H,I,J,L;J=function(N,M){return'<td style="text-align: center;">'+M+' KB</td>\n<td style="text-align: center;">'+N+" MS</td>"};H=getCurrentUser();L=function(N,M,P,O){if(M===7){if(H.userLogin&&(H.currentUserType==="1"||H.currentUser===O)){return'<a href="#" value="'+P+'" class="ce-link">'+N+"</a>"}else{return N}}else{return N}};I=function(M,P,O,N){if(H.userLogin&&(H.currentUserType==="1"||H.currentUser===N)){return'<a href="#" value="'+O+'" class="code-link">'+M+" B</a>"}else{return""+M+" B"}};return'<tr>\n  <td style="text-align: center;">'+K.statusId+'</td>\n  <td style="text-align: center;"><a href="/user/center/'+K.userName+'" target="_blank">'+K.userName+"</a></td>\n\n  "+(K.returnTypeId===1?J(K.timeCost,K.memoryCost):"<td></td><td></td>")+'\n\n  <td style="text-align: center;">'+K.language+'</td>\n\n  <td style="text-align: center;">'+(I(K.length,K.language,K.statusId,K.userName))+'</td>\n  <td style="text-align: center;">'+(Date.create(K.time).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"))+"</td>\n  <td></td>\n</tr>"},after:function(){var H=this;return f(".code-link").click(function(J){var I,K;I=f(J.currentTarget);K=I.attr("value");f.post("/status/info/"+K,function(N){var L,M;M="";if(N.result==="success"){M=N.code}else{M=N.error_msg}M=M.trim().escapeHTML();console.log(M);L=f("#code-modal");L.find(".modal-body").empty().append("<pre>"+M+"</pre>");L.find(".modal-body").prettify();return L.modal("toggle")});return false})}})}}};z=function(){var C=this;f(".dropdown-menu").find("form").click(function(D){return D.stopPropagation()});return f("img[type='avatar']").each(function(F,E){var D;D=f(E);return D.setAvatar({size:D.width()?D.width():void 0})})};e=function(){var D,C;D=f("#user-list");if(D.length!==0){return C=new j({listContainer:D,requestUrl:"/user/search",condition:{currentPage:null,startId:void 0,endId:void 0,userName:void 0,type:void 0,school:void 0,departmentId:void 0,orderFields:"solved,tried,id",orderAsc:"false,false,true"},formatter:function(F){var E;E=function(){var G;G="";if(this.user.userLogin&&this.user.currentUserType===u.ADMIN){G+='<div class="btn-toolbar" role="toolbar" style="position: absolute; top: 12px; right: 30px;">\n      <div class="btn-group">\n        <button type="button" class="btn btn-default btn-sm admin-profile-edit" user-name="'+F.userName+'">\n          <i class="fa fa-pencil"></i>\n        </button>\n      </div>\n    </div>'}return G};return'<div class="col-lg-6">\n  <div class="panel panel-default">\n    <div class="panel-body">\n      <div class="media">\n        <a class="pull-left" href="#">\n          <img id="cdoj-users-avatar" email="'+F.email+'"/>\n        </a>\n        <div class="media-body">\n          <h4 class="media-heading"><a href="/user/center/'+F.userName+'" target="_blank">'+F.nickName+" <small>"+F.userName+'</small></a></h4>\n          <span><i class="fa fa-map-marker"></i>'+F.school+'</span>\n          <br/>\n          <span><a href="/status/list?userName='+F.userName+'" target="_blank">'+F.solved+"/"+F.tried+"</a></span>\n          "+(E())+'\n        </div>\n      </div>\n    </div>\n    <div class="panel-footer" style="overflow: hidden;white-space: nowrap;text-overflow: ellipsis;">Motto: '+F.motto+"</div>\n  </div>\n</div>"},after:function(){var E,G,F,H=this;f("img#cdoj-users-avatar").setAvatar({size:64});F=f("#cdoj-admin-profile-edit-modal");E=f("#cdoj-admin-profile-edit-form");G=f("#cdoj-admin-profile-edit-form-onloading");f(".admin-profile-edit").click(function(K){var I,J;I=f(K.currentTarget);F.modal();J=I.attr("user-name");f.post("/user/secretProfile/"+J,function(L){console.log(L);E.setFormData(L.user);E.css("display","block");return G.css("display","none")});F.on("hidden.bs.modal",function(){E.css("display","none");return G.css("display","block")});return false});return f("#cdoj-admin-profile-edit-button").click(function(){var I;I=E.getFormData();if(I.newPassword===""){delete I.newPassword}if(I.newPasswordRepeat===""){delete I.newPasswordRepeat}B("/user/adminEdit",I,function(J){return E.formValidate({result:J,onSuccess:function(){F.modal("hide");return C.triggerRefresh()}})});return false})}})}};f=jQuery;f(function(){z();l();e();a();w();q();i();n();return A()})}).call(this);