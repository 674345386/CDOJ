(function(){var h,w,m,o,e,i,l,q,b,x,A,t,B,f,r,v,p,d,k,n,s,z,a,c,C,F,y,g,u,E,j,D;q={OJ_WAIT:0,OJ_AC:1,OJ_PE:2,OJ_TLE:3,OJ_MLE:4,OJ_WA:5,OJ_OLE:6,OJ_CE:7,OJ_RE_SEGV:8,OJ_RE_FPE:9,OJ_RE_BUS:10,OJ_RE_ABRT:11,OJ_RE_UNKNOWN:12,OJ_RF:13,OJ_SE:14,OJ_RE_JAVA:15,OJ_JUDGING:16,OJ_RUNNING:17,OJ_REJUDGING:18};e={PUBLIC:0,PRIVATE:1,DIY:2,INVITED:3};o={PENDING:"Pending",RUNNING:"Running",ENDED:"Ended"};w={NORMAL:"0",ADMIN:"1",CONSTANT:"2"};m={NONE:0,PASS:1,FAIL:2};x=function(J,H){var I,K,G;I=h(J);K=I.attr("email");G="http://www.gravatar.com/avatar/"+(hex_md5(K))+".jpg?"+(H.size?"s="+H.size+"&":"")+""+(H.rating?"r="+H.rating+"&":"")+""+(H.image?"d="+encodeURIComponent(H.image):"");I.attr("src",G);return J};h=jQuery;h.fn.setAvatar=function(H){var G,I=this;G={size:40,image:"retro",rating:"pg"};h.extend(G,H);return this.each(function(K,J){return x(J,G)})};E=function(G,H,I){return h.ajax({type:"POST",url:G,dataType:"json",contentType:"application/json",data:JSON.stringify(H),success:I})};u=function(H,G){return Object.merge(H,G,false,function(K,J,I){if(J.constructor===Array){J.add(I)}else{J=I}return J})};j=function(G){var H;H=window.open(G,"_blank");return H.focus()};h=jQuery;h.fn.getCursorPosition=function(){if(this.lengh===0){return -1}return h(this).getSelectionStart()};h.fn.setCursorPosition=function(G){if(this.lengh===0){return this}return h(this).setSelection(G,G)};h.fn.getSelection=function(){var H,G;if(this.lengh===0){return -1}G=h(this).getSelectionStart();H=h(this).getSelectionEnd();return this[0].value.substring(G,H)};h.fn.getSelectionStart=function(){var G,I,H;if(this.lengh===0){return -1}G=this[0];I=G.value.length;if(G.createTextRange){H=document.selection.createRange().duplicate();H.moveEnd("character",G.value.length);if(H.text===""){I=G.value.length}I=G.value.lastIndexOf(H.text)}else{if(typeof G.selectionStart!=="undefined"){I=G.selectionStart}}return I};h.fn.getSelectionEnd=function(){var G,I,H;if(this.lengh===0){return -1}G=this[0];I=G.value.length;if(G.createTextRange){H=document.selection.createRange().duplicate();H.moveStart("character",-G.value.length);if(H.text===""){I=G.value.length}I=G.value.lastIndexOf(H.text)}else{if(typeof G.selectionEnd!=="undefined"){I=G.selectionEnd}}return I};h.fn.setSelection=function(I,J){var H,G;if(this.lengh===0){return this}H=this[0];if(H.createTextRange){G=H.createTextRange();G.collapse(true);G.moveEnd("character",J);G.moveStart("character",I);G.select()}else{if(H.setSelectionRange){H.focus();H.setSelectionRange(I,J)}}return this};h.fn.insertAfterCursor=function(J,I){var H,G;if(this.length===0){return this}G=this.getCursorPosition();H=this.val();H=H.insert(J,G);this.val(H);return this.setCursorPosition(G+J.length+I)};t=8;B=function(G){if(G>9){return""+G}else{return"0"+G}};r=function(G,I,H){return""+G+"/"+(B(I+1))+"."+H};A=function(H,K,J){var G,I;G="";J.times(function(L){if(L%t===0){if(L>0){G+="</tr>"}G+="<tr>"}return G+='<td value="!['+(L+1)+"]("+(r(H,L,K))+')">\n  <span><img src="'+(r(H,L,K))+'" class="img-rounded" style="width: 50px; height: 50px"/></span>\n</td>'});G+="</tr>";I='<table class="table table-bordered table-condensed">\n  <tbody>\n    '+G+"\n  </tbody>\n</table>";return I};h=jQuery;h.fn.getFormValue=function(){var H,I,G;H=h(this);I=function(J){return H.attr("type")===J||H[0].localName===J};if(I("radio")){G=h(":radio[name='"+(H.attr("name"))+"']:checked").val();if(G==="all"){G=void 0}return G}else{if(I("select")){G=H.val();if(G===-1){G=void 0}return G}else{return H.val()}}};h.fn.getFormData=function(){var G,H=this;G={};this.each(function(J,K){var R,O,I,M,Q,N,P,L;M=["submit","reset","button","image","file"];R=h(K);I=R.find(":input");L=[];for(N=0,P=I.length;N<P;N++){Q=I[N];O=h(Q);if(M.none(O.attr("type"))){L.push(G[O.attr("name")]=O.getFormValue())}else{L.push(void 0)}}return L});return G};h.fn.setFormValue=function(I){var G,H;G=h(this);H=function(J){return G.attr("type")===J||G[0].localName===J};if(H("radio")){if(I===void 0){I="all"}if(G.attr("value")===I){return G.attr("checked",true)}else{return G.attr("checked",false)}}else{if(H("select")){if(I===void 0){I=-1}return G.val(I)}else{return G.val(I)}}};h.fn.setFormData=function(G){var H=this;return this.each(function(J,K){var R,O,I,M,Q,N,P,L;M=["submit","reset","button"];R=h(K);I=R.find(":input");L=[];for(N=0,P=I.length;N<P;N++){Q=I[N];O=h(Q);if(M.none(O.attr("type"))){L.push(O.setFormValue(G[O.attr("name")]))}else{L.push(void 0)}}return L})};h.fn.resetFormData=function(){var G=this;return this.each(function(I,J){var Q,N,H,L,P,M,O,K;L=["submit","reset","button"];Q=h(J);H=Q.find(":input");K=[];for(M=0,O=H.length;M<O;M++){P=H[M];N=h(P);if(L.none(N.attr("type"))){K.push(N.setFormValue(void 0))}else{K.push(void 0)}}return K})};h.fn.formValidate=function(K){var J,H,I,G,L=this;I={result:{result:"success"},onSuccess:function(){},onFail:function(){}};h.extend(I,K);G=I.result;H=false;if(G.result===null){alert("Unknown exception.")}else{if(G.result==="error"){alert(G.error_msg)}else{if(G.result==="success"){I.onSuccess();H=true}else{if(G.result==="field_error"){J=h(this);G.field.each(function(N){var O,M;M=J.find(":input[name='"+N.field+"']");if(M&&M.length>0){M=h(M.first());O=M.closest("div.form-group");return O.tooltip({trigger:"click",placement:"bottom",title:N.defaultMessage}).tooltip("show")}})}else{alert("Unknown exception.")}}}}if(!H){return I.onFail()}};h=jQuery;h.fn.unescapePre=function(){var G=this;return this.each(function(K,I){var H,J;H=h(I);J=("<pre>"+H[0].innerHTML+"</pre>").unescapeHTML();return H.replaceWith(h("<div>"+J+"</div>"))})};h.fn.unescapeCode=function(){var G=this;return this.each(function(K,I){var H,J;H=h(I);J="<code>"+(H[0].innerHTML.unescapeHTML())+"</code>";return H.replaceWith(J)})};h.fn.renderTable=function(){var G=this;return this.each(function(J,I){var H;H=h(I);return H.addClass("table").addClass("table-bordered").addClass("table-condensed").addClass("cdoj-markdown-table")})};h.fn.renderImage=function(){var G=this;return this.each(function(J,I){var H;return H=h(I)})};h.fn.markdown=function(){var G=this;return this.each(function(L,J){var I,H,K;I=h(J);K=I.html().trim().replace("<textarea>","").replace("</textarea>","").replace("<TEXTAREA>","").replace("</TEXTAREA>","").trim();H=h(marked(K));I.empty().append(H);I.find("code").unescapeCode();I.find("pre").unescapePre();I.find("table").renderTable();return I.find("img").renderImage()})};h=jQuery;h.fn.mathjax=function(){var G=this;MathJax.Hub.Config({tex2jax:{inlineMath:[["$","$"],["\\[","\\]"]]}});return this.each(function(I,H){return MathJax.Hub.Queue(["Typeset",MathJax.Hub,H])})};h=jQuery;h.fn.prettify=function(){var G=this;return this.find("pre").each(function(K,I){var H,J;H=h(I);if(H.attr("type")!=="no-prettify"){J=prettyPrintOne(H[0].innerText.escapeHTML());return H.empty().append(J)}})};D=function(){h('[type="markdown"]').markdown();MathJax.Hub.Config({tex2jax:{inlineMath:[["$","$"],["\\[","\\]"]]}});MathJax.Hub.Queue(["Typeset",MathJax.Hub]);return h(document.body).prettify()};v=function(){var H,G;H=location.search;H=H.substr(H.indexOf("?")+1);H=H.split("&");G={};H.each(function(I,J){I=I.split("=");if(I.length===2){return G[I[0]]=I[1]}});return G};i=(function(){function G(H){this.options=H;this.element=this.options.element;if(this.element===null||this.element.length===0){return null}this.createTextarea();this.toolbar()}G.prototype.escape=function(H){return H};G.prototype.createTextarea=function(){var H,I;H=this.element[0].innerHTML.trim();this.element.empty();I='<div class="panel panel-default">\n  <div class="panel-heading" id="flandre-heading">\n    <div class="btn-toolbar" role="toolbar">\n      <div class="btn-group">\n        <button type="button" class="btn btn-default btn-sm" id="tool-preview">Preview</button>\n      </div>\n      <div class="btn-group flandre-tools">\n        <a class="btn btn-default btn-sm" id="tool-emotion"><i class="fa fa-smile-o"></i></a>\n        <a class="btn btn-default btn-sm" id="tool-picture"><i class="fa fa-picture-o"></i></a>\n      </div>\n    </div>\n  </div>\n  <textarea class="tex2jax_ignore form-control" id="flandre-editor">'+(this.escape(H))+'</textarea>\n  <div id="flandre-preview"></div>\n</div>';return this.element.append(I)};G.prototype.toolbar=function(){var N,L,P,I,R,K,O,J,Q,H,M=this;N=this.element.find("#flandre-editor");O=this.element.find("#flandre-preview");R=this.options;N.elastic();H=this.element.find("#tool-preview");H.click(function(U){var S,T,V;S=h(U.currentTarget);T=S.hasClass("active");N.css("display","none");O.css("display","none");if(T){N.css("display","block");M.element.find(".flandre-tools").css("display","block")}else{V=N.val().escapeHTML();O.empty().append(V);O.markdown();O.prettify();O.mathjax();O.css("display","block");M.element.find(".flandre-tools").css("display","none")}return S.button("toggle")});J=this.element.find("#tool-emotion");P="emotion-modal-"+(this.element.attr("id"));I='<div class="modal fade" id="'+P+'" tabindex="-1" role="dialog" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title">\n          <ul class="nav nav-pills">\n            <li class="active"><a href="#emotion-brd" data-toggle="tab">BRD</a></li>\n          </ul>\n        </h4>\n      </div>\n      <div class="modal-body">\n        <div id="emotion-dialog" style="width: auto;" value="false">\n          <div class="tab-content">\n            <div class="tab-pane active" id="emotion-brd">\n              '+(A("/plugins/cdoj/img/emotion/brd","gif",40))+"\n            </div>\n          </div>\n        </div>\n      </div>\n    </div><!-- /.modal-content -->\n  </div><!-- /.modal-dialog -->\n</div><!-- /.modal -->";h(document.body).append(I);L=h("#"+P);J.click(function(){return L.modal("show")});L.on("shown.bs.modal",function(){var S=this;return L.find("#emotion-dialog").find("td").on("click",function(V){var T,U;T=h(V.currentTarget);U=T.attr("value");N.insertAfterCursor(U,0);return L.modal("hide")})});Q=this.element.find("#tool-picture");return K=new qq.FineUploaderBasic({button:Q[0],request:{endpoint:R.picture.uploadUrl,inputName:"uploadFile"},validation:{allowedExtensions:["jpeg","jpg","gif","png"],sizeLimit:10*1024*1024},multiple:false,callbacks:{onComplete:function(V,U,T){var S;if(T.success==="true"){S="!["+T.uploadedFile+"]("+T.uploadedFileUrl+")";return N.insertAfterCursor(S,0)}else{return console.log(T)}}}})};G.prototype.getText=function(){return this.element.find("#flandre-editor").val()};return G})();h=jQuery;h.fn.flandre=function(G){var H;if(G!==void 0){G.element=h(this)}else{G={element:h(this)}}H=new i(G);return H};b=(function(){function G(J){var K,N,I,H,L,M=this;this.father=J;this.search=this.father.searchGroup;L=this.father.options.condition;I=this.search.find("#condition");N=I.find("#search-button");K=I.find("#reset-button");N.click(function(){var O;O=Object.merge(L,I.getFormData());M.father.options.condition=O;M.father.refresh(O);M.close();return false});K.click(function(){I.resetFormData();return false});H=I.find("#rejudge-button");if(H.length>0){H.click(function(){var O;O=Object.merge(L,I.getFormData());E("/status/count",O,function(P){if(P.result==="success"){if(confirm("Rejudge all "+P.count+" records")){return E("/status/rejudge",O,function(Q){if(Q.result==="success"){return alert("Done!")}else{return alert(Q.error_msg)}})}}else{return alert(P.error_msg)}});M.father.options.condition=O;M.father.refresh(O);M.close();return false})}}G.prototype.set=function(I){var H;H=this.search.find("#condition");return H.setFormData(I)};G.prototype.close=function(){var H;H=this.search.find("#advanced");return H.dropdown("toggle")};return G})();l=(function(){function G(I){var J,H;this.options=I;this.listContainer=this.options.listContainer;this.searchGroup=this.listContainer.find("#advance-search");this.searchModule=new b(this);this.pageInfo=this.listContainer.find("#page-info");this.refreshLock=0;J=v();this.searchModule.set(J);this.options.condition=u(this.options.condition,J);this.refresh(this.options.condition);H=this;if(this.options.autoRefresh===true){setInterval(function(){return H.triggerRefresh()},this.options.refreshInterval===void 0?1000:this.options.refreshInterval)}}G.prototype.triggerRefresh=function(){return this.refresh(this.options.condition)};G.prototype.refresh=function(I){var H=this;if(this.refreshLock===0){this.refreshLock=1;this.list=this.listContainer.find("#list-container");E(this.options.requestUrl,I,function(J){H.pageInfo.empty();if(J.pageInfo!==void 0){H.pageInfo.append(J.pageInfo);H.pageInfo.find("a").click(function(L){var K;K=h(L.currentTarget);if(K.attr("href")===void 0){return false}I.currentPage=K.attr("href");H.refresh(I);return false})}H.list.empty();J.list.each(function(K){return H.list.append(H.options.formatter(K))});if(H.options.after!==void 0){H.options.after()}return H.refreshLock=0})}};return G})();n=function(){var H,I,L,N,M,G,R,Q,O,J,P,K;I=h("#cdoj-navbar");H=h("#cdoj-container");N=I.find("#cdoj-user");L=I.find("#cdoj-navbar-menu");G=H.find("#mzry1992-header");M=H.find("#mzry1992-container");if(G.length!==0&&M.length!==0){M.css("margin-top",G.outerHeight())}R=window.location.pathname;Q="home";K=["problem","contest","status","user","admin"];for(J=0,P=K.length;J<P;J++){O=K[J];if(R.startsWith("/"+O+"/")){Q=O}}return L.find("#menu-item-"+Q).addClass("cdoj-menu-selected")};p=function(){var J,H,G,I,K=this;J=h("#article-editor");if(J.length>0){H=h("#article-editor-title").attr("value");I=["content"];G=[];I.each(function(L,M){return G.push({id:L,editor:h("#"+L).flandre({picture:{uploadUrl:"/picture/uploadPicture/article/"+H}})})});return h("#submit").click(function(){var L;L={sampleInput:h("textarea#sample-input").val(),sampleOutput:h("textarea#sample-output").val(),title:h("#title").val(),source:h("#source").val()};G.each(function(M,N){return L[M.id]=M.editor.getText()});if(H==="new"){L.action="new"}else{L.action="edit";L.articleId=H}E("/article/edit",L,function(M){if(M.result==="success"){return window.location.href="/article/show/"+M.articleId}else{if(M.result==="field_error"){return alert("Please enter a valid title!")}else{return alert(M.error_msg)}}});return false})}};k=function(){var J,M,R,Q,K,N,S,L,G,I,O,H,P=this;J=h("#contest-show");if(J.length>0){R=h("#contest-title").attr("value");G=h("#contest-current-time").attr("value");H=h("#contest-start-time").attr("value");O=h("#contest-end-time").attr("value");L=h("#contest-type").attr("value");K=h("#contest-status").attr("value");S=h("#contest-show-tab");Q=h("#contest-problem-summary");N=S.find("a[href='#tab-contest-status']");M=h("#contest-progress-bar");if(K===o.PENDING){}else{if(K===o.RUNNING){}else{if(K===o.ENDED){M.addClass("progress-bar-success").css("width","100%")}}}Q.find("a").click(function(W){var U,T,V;U=h(W.currentTarget);T=U.attr("href");if(T.startsWith("#")){V=S.find("a[href='"+T+"']");if(V.length>0){V.tab("show")}return false}else{return true}});I=f();if(I.userLogin){h("#submit-code").click(function(){var T;T={codeContent:h("#code-content").val(),languageId:h(":radio[name='language']:checked").attr("value"),contestId:R,problemId:h("#problem-selector").find("option:selected").val()};E("/status/submit",T,function(U){if(U.result==="error"){return alert(U.error_msg)}else{if(U.result==="success"){return N.tab("show")}}});return false})}initContestStatusList(R)}};d=function(){var G,H;G=h("#contest-list");if(G.length!==0){return H=new l({listContainer:G,requestUrl:"/contest/search",condition:{currentPage:null,startId:void 0,endId:void 0,keyword:void 0,title:void 0,orderFields:"id",orderAsc:"false"},formatter:function(J){var I;console.log(J);this.user=f();I=function(){var K;K="";if(this.user.userLogin&&this.user.currentUserType===w.ADMIN){K+='<div class="btn-toolbar" role="toolbar">\n  <div class="btn-group">\n    <button type="button" class="btn btn-default btn-sm contest-visible-state-editor" contest-id="'+J.contestId+'" visible="'+J.isVisible+'">\n      <i class="'+(J.isVisible?"fa fa-eye":"fa fa-eye-slash")+'"></i>\n    </button>\n    <button type="button" class="btn btn-default btn-sm contest-editor" contest-id="'+J.contestId+'"><i class="fa fa-pencil"></i></button>\n  </div>\n</div>'}return K};return'<div class="col-md-12">\n  <div class="panel panel-default">\n    <div class="panel-heading">\n      <h3 class="panel-title">\n        <a href="/contest/show/'+J.contestId+'" target="_blank">'+J.title+"</a>\n        <span class='pull-right admin-span'>"+(I())+'</span>\n      </h3>\n    </div>\n    <div class="panel-body">\n      <span>'+(Date.create(J.time).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"))+"--"+(Date.create(J.time+J.length*1000).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"))+"</span>\n    </div>\n  </div>\n</div>"},after:function(){var I=this;this.user=f();if(this.user.userLogin&&this.user.currentUserType===w.ADMIN){h(".contest-editor").click(function(K){var J;J=h(K.currentTarget);j("/contest/editor/"+(J.attr("contest-id")));return false});return h(".contest-visible-state-editor").click(function(K){var J,M,L;J=h(K.currentTarget);L=J.attr("visible")==="true"?true:false;M="/contest/operator/"+(J.attr("contest-id"))+"/isVisible/"+(!L);h.post(M,function(N){if(N.result==="success"){L=!L;J.attr("visible",L);return J.empty().append('<i class="'+(L?"fa fa-eye":"fa fa-eye-slash")+'"></i>')}});return false})}}})}};s=function(){var K,I,G,H,J=this;I=h("#problem-data-editor");if(I.length>0){H=I.find("#problem-data-editor-title").attr("value");I.find("#submit").click(function(){var L,M;L=I.find("#problem-data-form");M=L.getFormData();M.problemId=H;E("/problem/updateProblemData",M,function(N){return L.formValidate({result:N,onSuccess:function(){return window.location.href="/problem/show/"+H}})});return false});K=I.find("#problem-data-uploader");return G=new qq.FineUploaderBasic({button:K[0],request:{endpoint:"/problem/uploadProblemDataFile/"+H,inputName:"uploadFile"},validation:{allowedExtensions:["zip"],sizeLimit:100*1000*1000},multiple:false,callbacks:{onComplete:function(O,N,M){var L;if(M.success==="true"){L='<div class="alert alert-success">\n  Total data: '+M.total+"\n</div>"}else{L='<div class="alert alert-danger">\n  '+M.error+"\n</div>"}return I.find("#uploader-info").empty().append(L)},onProgress:function(P,O,M,N){var L;L='<div class="alert alert-info">\n  '+M+" bytes of "+N+"\n</div>";return I.find("#uploader-info").empty().append(L)},onError:function(N,M,L){return alert(L)}}})}};z=function(){var J,H,G,I,K=this;J=h("#problem-editor");if(J.length>0){H=h("#problem-editor-title").attr("value");I=["description","input","output","hint"];G=[];I.each(function(L,M){return G.push({id:L,editor:h("#"+L).flandre({picture:{uploadUrl:"/picture/uploadPicture/problem/"+H}})})});return h("#submit").click(function(){var L;L={sampleInput:h("textarea#sample-input").val(),sampleOutput:h("textarea#sample-output").val(),title:h("#title").val(),source:h("#source").val()};G.each(function(M,N){return L[M.id]=M.editor.getText()});if(H==="new"){L.action="new"}else{L.action="edit";L.problemId=H}E("/problem/edit",L,function(M){if(M.result==="success"){return window.location.href="/problem/show/"+M.problemId}else{if(M.result==="field_error"){return alert("Please enter a valid title!")}else{return alert(M.error_msg)}}});return false})}};a=function(){var H,G,J,I,K=this;if(h("#problem-show").length>0){H=h("#currentUser");this.userLogin=H.length!==0?true:false;J=h("#problem-title").attr("value");if(this.userLogin){h("#submit-code").click(function(){var L;L={codeContent:h("#code-content").val(),languageId:h(":radio[name='language']:checked").attr("value"),contestId:null,problemId:J};E("/status/submit",L,function(M){if(M.result==="error"){return alert(M.error_msg)}else{if(M.result==="success"){return window.location.href="/status/list"}}});return false})}G=h("#cdoj-best-solutions");if(G.length!==0){return I=new l({listContainer:G,requestUrl:"/status/search",condition:{currentPage:null,countPerPage:10,startId:void 0,endId:void 0,userName:void 0,problemId:J,languageId:void 0,contestId:void 0,result:"OJ_AC",orderFields:"timeCost,memoryCost,Length,statusId",orderAsc:"true,true,true,true"},formatter:function(O){var L,M,N,P;N=function(R,Q){return'<td style="text-align: center;">'+Q+' KB</td>\n<td style="text-align: center;">'+R+" MS</td>"};L=f();P=function(R,Q,T,S){if(Q===7){if(L.userLogin&&(L.currentUserType==="1"||L.currentUser===S)){return'<a href="#" value="'+T+'" class="ce-link">'+R+"</a>"}else{return R}}else{return R}};M=function(Q,T,S,R){if(L.userLogin&&(L.currentUserType==="1"||L.currentUser===R)){return'<a href="#" value="'+S+'" class="code-link">'+Q+" B</a>"}else{return""+Q+" B"}};return'<tr>\n  <td style="text-align: center;">'+O.statusId+'</td>\n  <td style="text-align: center;"><a href="/user/center/'+O.userName+'" target="_blank">'+O.userName+"</a></td>\n\n  "+(O.returnTypeId===1?N(O.timeCost,O.memoryCost):"<td></td><td></td>")+'\n\n  <td style="text-align: center;">'+O.language+'</td>\n\n  <td style="text-align: center;">'+(M(O.length,O.language,O.statusId,O.userName))+'</td>\n  <td style="text-align: center;">'+(Date.create(O.time).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"))+"</td>\n  <td></td>\n</tr>"},after:function(){var L=this;return h(".code-link").click(function(N){var M,O;M=h(N.currentTarget);O=M.attr("value");h.post("/status/info/"+O,function(R){var P,Q;Q="";if(R.result==="success"){Q=R.code}else{Q=R.error_msg}Q=Q.trim().escapeHTML();console.log(Q);P=h("#code-modal");P.find(".modal-body").empty().append("<pre>"+Q+"</pre>");P.find(".modal-body").prettify();return P.modal("toggle")});return false})}})}}};c=function(){var G,H;G=h("#status-list");if(G.length!==0){return H=new l({listContainer:G,requestUrl:"/status/search",condition:{currentPage:null,startId:void 0,endId:void 0,userName:void 0,problemId:void 0,languageId:void 0,contestId:void 0,result:"OJ_ALL",orderFields:"statusId",orderAsc:"false"},formatter:function(O){var I,N,J,K,L,P,M;M=function(Q){switch(Q){case 0:case 16:case 18:return"<i class='fa fa-spinner fa-spin'></i>";case 1:return"<i class='fa fa-check-circle'></i>";case 2:return"<i class='fa fa-circle'></i>";case 3:case 4:case 6:case 13:return"<i class='fa fa-ban'></i>";case 5:return"<i class='fa fa-times-circle'></i>";case 7:return"<i class='fa fa-warning'></i>";case 8:case 9:case 10:case 11:case 12:case 15:return"<i class='fa fa-bug'></i>";case 14:return"<i class='fa fa-frown-o'></i>";case 17:return"<i class='fa fa-gear fa-spin'></i>";default:return""}};N=function(Q){switch(Q){case 0:case 16:case 17:case 18:return"status-info";case 1:return"status-success";default:return"status-danger"}};K=function(Q){return'<small class="pull-right">\n  <a href="/contest/show/'+Q+'">Contest <i class="fa fa-trophy"></i>'+Q+"</a>,&nbsp;\n</small>"};L=function(R,Q){return'<td style="text-align: center;">'+Q+' KB</td>\n<td style="text-align: center;">'+R+" MS</td>"};I=f();P=function(R,Q,T,S){if(Q===7){if(I.userLogin&&(I.currentUserType==="1"||I.currentUser===S)){return'<a href="#" value="'+T+'" class="ce-link">'+R+"</a>"}else{return R}}else{return R}};J=function(Q,T,S,R){if(I.userLogin&&(I.currentUserType==="1"||I.currentUser===R)){return'<a href="#" value="'+S+'" class="code-link">'+Q+" B</a>"}else{return""+Q+" B"}};return'<tr>\n  <td style="text-align: center;">'+O.statusId+'</td>\n  <td style="text-align: center;"><a href="/user/center/'+O.userName+'" target="_blank">'+O.userName+'</a></td>\n  <td style="text-align: center;"><a href="/problem/show/'+O.problemId+'" target="_blank">'+O.problemId+'</a></td>\n  <td style="text-align: center;" class="'+(N(O.returnTypeId))+'">'+(P(O.returnType,O.returnTypeId,O.statusId,O.userName))+"</td>\n\n  "+(O.returnTypeId===1?L(O.timeCost,O.memoryCost):"<td></td><td></td>")+'\n\n  <td style="text-align: center;">'+O.language+'</td>\n\n  <td style="text-align: center;">'+(J(O.length,O.language,O.statusId,O.userName))+'</td>\n  <td style="text-align: center;">'+(Date.create(O.time).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"))+"</td>\n  <td></td>\n</tr>"},after:function(){var I=this;h(".ce-link").click(function(K){var J,L;J=h(K.currentTarget);L=J.attr("value");h.post("/status/info/"+L,function(O){var M,N;N="";if(O.result==="success"){N=O.compileInfo}else{N=O.error_msg}N=N.trim();M=h("#compile-info-modal");M.find(".modal-body").empty().append("<pre>"+N+"</pre>");M.find(".modal-body").prettify();return M.modal("toggle")});return false});h(".code-link").click(function(K){var J,L;J=h(K.currentTarget);L=J.attr("value");h.post("/status/info/"+L,function(O){var M,N;N="";if(O.result==="success"){N=O.code}else{N=O.error_msg}N=N.trim().escapeHTML();console.log(N);M=h("#code-modal");M.find(".modal-body").empty().append("<pre>"+N+"</pre>");M.find(".modal-body").prettify();return M.modal("toggle")});return false});return h("#status-refresh-button").click(function(){H.triggerRefresh();return false})}})}};C=function(){var G=this;h(".dropdown-menu").find("form").click(function(H){return H.stopPropagation()});return h("img[type='avatar']").each(function(J,I){var H;H=h(I);return H.setAvatar({size:H.width()?H.width():void 0})})};y=function(){var G,H=this;G=h("#cdoj-activation-form");if(G.length!==0){return G.find("#submit-button").click(function(){var I;I=G.getFormData();E("/user/resetPassword",I,function(J){return G.formValidate({result:J,onSuccess:function(){alert("Success!");return window.location.href="/"}})});return false})}};f=function(){var G;G=h("#currentUser");this.userLogin=G.length!==0?true:false;if(this.userLogin){this.currentUser=G[0].innerHTML.trim();this.currentUserType=G.attr("type");return{userLogin:true,currentUser:this.currentUser,currentUserType:this.currentUserType}}else{return{userLogin:false}}};F=function(){var G=this;this.user=f();if(this.user.userLogin===false){h("#cdoj-login-button").click(function(){var H,I;H=h("#cdoj-login-form");I=H.getFormData();E("/user/login",I,function(J){return H.formValidate({result:J,onSuccess:function(){return window.location.reload()}})});return false});h("#cdoj-register-button").click(function(){var I,H;I=h("#cdoj-register-form");H=I.getFormData();E("/user/register",H,function(J){return I.formValidate({result:J,onSuccess:function(){return window.location.reload()}})});return false});h("#cdoj-activate-button").click(function(){var H,I;H=h("#cdoj-activate-form");I=H.getFormData();h.post("/user/sendSerialKey/"+I.userName,function(J){if(J.result==="success"){alert("We send you an Email with the url to reset your password right now, please check your mail box.");return h("#cdoj-activate-modal").modal("hide")}else{if(J.result==="failed"){return alert("Unknown error occurred.")}else{return alert(J.error_msg)}}});return false})}if(this.user.userLogin){h("#cdoj-logout-button").click(function(){h.post("/user/logout",function(H){if(H.result==="success"){return window.location.reload()}});return false});return h("#cdoj-profile-edit-button").click(function(){var I,H;I=h("#cdoj-profile-edit-form");H=I.getFormData();if(H.newPassword===""){delete H.newPassword}if(H.newPasswordRepeat===""){delete H.newPasswordRepeat}E("/user/edit",H,function(J){return I.formValidate({result:J,onSuccess:function(){return window.location.reload()}})});return false})}};g=function(){var H,G;H=h("#user-list");if(H.length!==0){return G=new l({listContainer:H,requestUrl:"/user/search",condition:{currentPage:null,startId:void 0,endId:void 0,userName:void 0,type:void 0,school:void 0,departmentId:void 0,orderFields:"solved,tried,id",orderAsc:"false,false,true"},formatter:function(J){var I;I=function(){var K;K="";if(this.user.userLogin&&this.user.currentUserType===w.ADMIN){K+='<div class="btn-toolbar" role="toolbar" style="position: absolute; top: 12px; right: 30px;">\n      <div class="btn-group">\n        <button type="button" class="btn btn-default btn-sm admin-profile-edit" user-name="'+J.userName+'">\n          <i class="fa fa-pencil"></i>\n        </button>\n      </div>\n    </div>'}return K};return'<div class="col-lg-6">\n  <div class="panel panel-default">\n    <div class="panel-body">\n      <div class="media">\n        <a class="pull-left" href="#">\n          <img id="cdoj-users-avatar" email="'+J.email+'"/>\n        </a>\n        <div class="media-body">\n          <h4 class="media-heading"><a href="/user/center/'+J.userName+'" target="_blank">'+J.nickName+" <small>"+J.userName+'</small></a></h4>\n          <span><i class="fa fa-map-marker"></i>'+J.school+'</span>\n          <br/>\n          <span><a href="/status/list?userName='+J.userName+'" target="_blank">'+J.solved+"/"+J.tried+"</a></span>\n          "+(I())+'\n        </div>\n      </div>\n    </div>\n    <div class="panel-footer" style="overflow: hidden;white-space: nowrap;text-overflow: ellipsis;">Motto: '+J.motto+"</div>\n  </div>\n</div>"},after:function(){var I,K,J,L=this;h("img#cdoj-users-avatar").setAvatar({size:64});J=h("#cdoj-admin-profile-edit-modal");I=h("#cdoj-admin-profile-edit-form");K=h("#cdoj-admin-profile-edit-form-onloading");h(".admin-profile-edit").click(function(O){var M,N;M=h(O.currentTarget);J.modal();N=M.attr("user-name");h.post("/user/secretProfile/"+N,function(P){console.log(P);I.setFormData(P.user);I.css("display","block");return K.css("display","none")});J.on("hidden.bs.modal",function(){I.css("display","none");return K.css("display","block")});return false});return h("#cdoj-admin-profile-edit-button").click(function(){var M;M=I.getFormData();if(M.newPassword===""){delete M.newPassword}if(M.newPasswordRepeat===""){delete M.newPasswordRepeat}E("/user/adminEdit",M,function(N){return I.formValidate({result:N,onSuccess:function(){J.modal("hide");return G.triggerRefresh()}})});return false})}})}};h=jQuery;h(function(){C();n();g();y();a();z();s();k();p();return D()})}).call(this);