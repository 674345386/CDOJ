(function(){var h,y,m,p,e,i,l,r,b,z,C,u,D,f,s,w,q,x,d,k,n,t,B,o,a,c,E,H,A,g,v,G,j,F;r={OJ_WAIT:0,OJ_AC:1,OJ_PE:2,OJ_TLE:3,OJ_MLE:4,OJ_WA:5,OJ_OLE:6,OJ_CE:7,OJ_RE_SEGV:8,OJ_RE_FPE:9,OJ_RE_BUS:10,OJ_RE_ABRT:11,OJ_RE_UNKNOWN:12,OJ_RF:13,OJ_SE:14,OJ_RE_JAVA:15,OJ_JUDGING:16,OJ_RUNNING:17,OJ_REJUDGING:18};e={PUBLIC:0,PRIVATE:1,DIY:2,INVITED:3};p={PENDING:"Pending",RUNNING:"Running",ENDED:"Ended"};y={NORMAL:"0",ADMIN:"1",CONSTANT:"2"};m={NONE:0,PASS:1,FAIL:2};z=function(L,J){var K,M,I;K=h(L);M=K.attr("email");I="http://www.gravatar.com/avatar/"+(hex_md5(M))+".jpg?"+(J.size?"s="+J.size+"&":"")+""+(J.rating?"r="+J.rating+"&":"")+""+(J.image?"d="+encodeURIComponent(J.image):"");K.attr("src",I);return L};h=jQuery;h.fn.setAvatar=function(J){var I,K=this;I={size:40,image:"retro",rating:"pg"};h.extend(I,J);return this.each(function(M,L){return z(L,I)})};G=function(I,J,K){return h.ajax({type:"POST",url:I,dataType:"json",contentType:"application/json",data:JSON.stringify(J),success:K})};v=function(J,I){return Object.merge(J,I,false,function(M,L,K){if(L.constructor===Array){L.add(K)}else{L=K}return L})};j=function(I){var J;J=window.open(I,"_blank");return J.focus()};h=jQuery;h.fn.getCursorPosition=function(){if(this.lengh===0){return -1}return h(this).getSelectionStart()};h.fn.setCursorPosition=function(I){if(this.lengh===0){return this}return h(this).setSelection(I,I)};h.fn.getSelection=function(){var J,I;if(this.lengh===0){return -1}I=h(this).getSelectionStart();J=h(this).getSelectionEnd();return this[0].value.substring(I,J)};h.fn.getSelectionStart=function(){var I,K,J;if(this.lengh===0){return -1}I=this[0];K=I.value.length;if(I.createTextRange){J=document.selection.createRange().duplicate();J.moveEnd("character",I.value.length);if(J.text===""){K=I.value.length}K=I.value.lastIndexOf(J.text)}else{if(typeof I.selectionStart!=="undefined"){K=I.selectionStart}}return K};h.fn.getSelectionEnd=function(){var I,K,J;if(this.lengh===0){return -1}I=this[0];K=I.value.length;if(I.createTextRange){J=document.selection.createRange().duplicate();J.moveStart("character",-I.value.length);if(J.text===""){K=I.value.length}K=I.value.lastIndexOf(J.text)}else{if(typeof I.selectionEnd!=="undefined"){K=I.selectionEnd}}return K};h.fn.setSelection=function(K,L){var J,I;if(this.lengh===0){return this}J=this[0];if(J.createTextRange){I=J.createTextRange();I.collapse(true);I.moveEnd("character",L);I.moveStart("character",K);I.select()}else{if(J.setSelectionRange){J.focus();J.setSelectionRange(K,L)}}return this};h.fn.insertAfterCursor=function(L,K){var J,I;if(this.length===0){return this}I=this.getCursorPosition();J=this.val();J=J.insert(L,I);this.val(J);return this.setCursorPosition(I+L.length+K)};u=8;D=function(I){if(I>9){return""+I}else{return"0"+I}};s=function(I,K,J){return""+I+"/"+(D(K+1))+"."+J};C=function(J,M,L){var I,K;I="";L.times(function(N){if(N%u===0){if(N>0){I+="</tr>"}I+="<tr>"}return I+='<td value="!['+(N+1)+"]("+(s(J,N,M))+')">\n  <span><img src="'+(s(J,N,M))+'" class="img-rounded" style="width: 50px; height: 50px"/></span>\n</td>'});I+="</tr>";K='<table class="table table-bordered table-condensed">\n  <tbody>\n    '+I+"\n  </tbody>\n</table>";return K};h=jQuery;h.fn.getFormValue=function(){var J,K,I;J=h(this);K=function(L){return J.attr("type")===L||J[0].localName===L};if(K("radio")){I=h(":radio[name='"+(J.attr("name"))+"']:checked").val();if(I==="all"){I=void 0}return I}else{if(K("select")){I=J.val();if(I===-1){I=void 0}return I}else{return J.val()}}};h.fn.getFormData=function(){var I,J=this;I={};this.each(function(L,M){var T,Q,K,O,S,P,R,N;O=["submit","reset","button","image","file"];T=h(M);K=T.find(":input");N=[];for(P=0,R=K.length;P<R;P++){S=K[P];Q=h(S);if(O.none(Q.attr("type"))){N.push(I[Q.attr("name")]=Q.getFormValue())}else{N.push(void 0)}}return N});return I};h.fn.setFormValue=function(K){var I,J;I=h(this);J=function(L){return I.attr("type")===L||I[0].localName===L};if(J("radio")){if(K===void 0){K="all"}if(I.attr("value")===K){return I.attr("checked",true)}else{return I.attr("checked",false)}}else{if(J("select")){if(K===void 0){K=-1}return I.val(K)}else{return I.val(K)}}};h.fn.setFormData=function(I){var J=this;return this.each(function(L,M){var T,Q,K,O,S,P,R,N;O=["submit","reset","button"];T=h(M);K=T.find(":input");N=[];for(P=0,R=K.length;P<R;P++){S=K[P];Q=h(S);if(O.none(Q.attr("type"))){N.push(Q.setFormValue(I[Q.attr("name")]))}else{N.push(void 0)}}return N})};h.fn.resetFormData=function(){var I=this;return this.each(function(K,L){var S,P,J,N,R,O,Q,M;N=["submit","reset","button"];S=h(L);J=S.find(":input");M=[];for(O=0,Q=J.length;O<Q;O++){R=J[O];P=h(R);if(N.none(P.attr("type"))){M.push(P.setFormValue(void 0))}else{M.push(void 0)}}return M})};h.fn.formValidate=function(M){var L,J,K,I,N=this;K={result:{result:"success"},onSuccess:function(){},onFail:function(){}};h.extend(K,M);I=K.result;J=false;if(I.result===null){alert("Unknown exception.")}else{if(I.result==="error"){alert(I.error_msg)}else{if(I.result==="success"){K.onSuccess();J=true}else{if(I.result==="field_error"){L=h(this);I.field.each(function(P){var Q,O;O=L.find(":input[name='"+P.field+"']");if(O&&O.length>0){O=h(O.first());Q=O.closest("div.form-group");return Q.tooltip({trigger:"click",placement:"bottom",title:P.defaultMessage}).tooltip("show")}})}else{alert("Unknown exception.")}}}}if(!J){return K.onFail()}};h=jQuery;h.fn.unescapePre=function(){var I=this;return this.each(function(M,K){var J,L;J=h(K);L=("<pre>"+J[0].innerHTML+"</pre>").unescapeHTML();return J.replaceWith(h("<div>"+L+"</div>"))})};h.fn.unescapeCode=function(){var I=this;return this.each(function(M,K){var J,L;J=h(K);L="<code>"+(J[0].innerHTML.unescapeHTML())+"</code>";return J.replaceWith(L)})};h.fn.renderTable=function(){var I=this;return this.each(function(L,K){var J;J=h(K);return J.addClass("table").addClass("table-bordered").addClass("table-condensed").addClass("cdoj-markdown-table")})};h.fn.renderImage=function(){var I=this;return this.each(function(L,K){var J;return J=h(K)})};h.fn.markdown=function(){var I=this;return this.each(function(N,L){var K,J,M;K=h(L);M=K.html().trim().replace("<textarea>","").replace("</textarea>","").replace("<TEXTAREA>","").replace("</TEXTAREA>","").trim();J=h(marked(M));K.empty().append(J);K.find("code").unescapeCode();K.find("pre").unescapePre();K.find("table").renderTable();return K.find("img").renderImage()})};h=jQuery;h.fn.mathjax=function(){var I=this;MathJax.Hub.Config({tex2jax:{inlineMath:[["$","$"],["\\[","\\]"]]}});return this.each(function(K,J){return MathJax.Hub.Queue(["Typeset",MathJax.Hub,J])})};h=jQuery;h.fn.prettify=function(){var I=this;return this.find("pre").each(function(M,K){var J,L;J=h(K);if(J.attr("type")!=="no-prettify"){L=prettyPrintOne(J[0].innerText.escapeHTML());return J.empty().append(L)}})};F=function(){h('[type="markdown"]').markdown();MathJax.Hub.Config({tex2jax:{inlineMath:[["$","$"],["\\[","\\]"]]}});MathJax.Hub.Queue(["Typeset",MathJax.Hub]);return h(document.body).prettify()};w=function(){var J,I;J=location.search;J=J.substr(J.indexOf("?")+1);J=J.split("&");I={};J.each(function(K,L){K=K.split("=");if(K.length===2){return I[K[0]]=K[1]}});return I};i=(function(){function I(J){this.options=J;this.element=this.options.element;if(this.element===null||this.element.length===0){return null}this.createTextarea();this.toolbar()}I.prototype.escape=function(J){return J};I.prototype.createTextarea=function(){var J,K;J=this.element[0].innerHTML.trim();this.element.empty();K='<div class="panel panel-default">\n  <div class="panel-heading" id="flandre-heading">\n    <div class="btn-toolbar" role="toolbar">\n      <div class="btn-group">\n        <button type="button" class="btn btn-default btn-sm" id="tool-preview">Preview</button>\n      </div>\n      <div class="btn-group flandre-tools">\n        <a class="btn btn-default btn-sm" id="tool-emotion"><i class="fa fa-smile-o"></i></a>\n        <a class="btn btn-default btn-sm" id="tool-picture"><i class="fa fa-picture-o"></i></a>\n      </div>\n    </div>\n  </div>\n  <textarea class="tex2jax_ignore form-control" id="flandre-editor">'+(this.escape(J))+'</textarea>\n  <div id="flandre-preview"></div>\n</div>';return this.element.append(K)};I.prototype.toolbar=function(){var P,N,R,K,T,M,Q,L,S,J,O=this;P=this.element.find("#flandre-editor");Q=this.element.find("#flandre-preview");T=this.options;P.elastic();J=this.element.find("#tool-preview");J.click(function(W){var U,V,X;U=h(W.currentTarget);V=U.hasClass("active");P.css("display","none");Q.css("display","none");if(V){P.css("display","block");O.element.find(".flandre-tools").css("display","block")}else{X=P.val().escapeHTML();Q.empty().append(X);Q.markdown();Q.prettify();Q.mathjax();Q.css("display","block");O.element.find(".flandre-tools").css("display","none")}return U.button("toggle")});L=this.element.find("#tool-emotion");R="emotion-modal-"+(this.element.attr("id"));K='<div class="modal fade" id="'+R+'" tabindex="-1" role="dialog" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4 class="modal-title">\n          <ul class="nav nav-pills">\n            <li class="active"><a href="#emotion-brd" data-toggle="tab">BRD</a></li>\n          </ul>\n        </h4>\n      </div>\n      <div class="modal-body">\n        <div id="emotion-dialog" style="width: auto;" value="false">\n          <div class="tab-content">\n            <div class="tab-pane active" id="emotion-brd">\n              '+(C("/plugins/cdoj/img/emotion/brd","gif",40))+"\n            </div>\n          </div>\n        </div>\n      </div>\n    </div><!-- /.modal-content -->\n  </div><!-- /.modal-dialog -->\n</div><!-- /.modal -->";h(document.body).append(K);N=h("#"+R);L.click(function(){return N.modal("show")});N.on("shown.bs.modal",function(){var U=this;return N.find("#emotion-dialog").find("td").on("click",function(X){var V,W;V=h(X.currentTarget);W=V.attr("value");P.insertAfterCursor(W,0);return N.modal("hide")})});S=this.element.find("#tool-picture");return M=new qq.FineUploaderBasic({button:S[0],request:{endpoint:T.picture.uploadUrl,inputName:"uploadFile"},validation:{allowedExtensions:["jpeg","jpg","gif","png"],sizeLimit:10*1024*1024},multiple:false,callbacks:{onComplete:function(X,W,V){var U;if(V.success==="true"){U="!["+V.uploadedFile+"]("+V.uploadedFileUrl+")";return P.insertAfterCursor(U,0)}else{return console.log(V)}}}})};I.prototype.getText=function(){return this.element.find("#flandre-editor").val()};return I})();h=jQuery;h.fn.flandre=function(I){var J;if(I!==void 0){I.element=h(this)}else{I={element:h(this)}}J=new i(I);return J};b=(function(){function I(L){var M,P,K,J,N,O=this;this.father=L;this.search=this.father.searchGroup;N=this.father.options.condition;K=this.search.find("#condition");P=K.find("#search-button");M=K.find("#reset-button");P.click(function(){var Q;Q=Object.merge(N,K.getFormData());O.father.options.condition=Q;O.father.refresh(Q);O.close();return false});M.click(function(){K.resetFormData();return false});J=K.find("#rejudge-button");if(J.length>0){J.click(function(){var Q;Q=Object.merge(N,K.getFormData());G("/status/count",Q,function(R){if(R.result==="success"){if(confirm("Rejudge all "+R.count+" records")){return G("/status/rejudge",Q,function(S){if(S.result==="success"){return alert("Done!")}else{return alert(S.error_msg)}})}}else{return alert(R.error_msg)}});O.father.options.condition=Q;O.father.refresh(Q);O.close();return false})}}I.prototype.set=function(K){var J;J=this.search.find("#condition");return J.setFormData(K)};I.prototype.close=function(){var J;J=this.search.find("#advanced");return J.dropdown("toggle")};return I})();l=(function(){function I(K){var L,J;this.options=K;this.listContainer=this.options.listContainer;this.searchGroup=this.listContainer.find("#advance-search");this.searchModule=new b(this);this.pageInfo=this.listContainer.find("#page-info");this.refreshLock=0;L=w();this.searchModule.set(L);this.options.condition=v(this.options.condition,L);this.refresh(this.options.condition);J=this;if(this.options.autoRefresh===true){setInterval(function(){return J.triggerRefresh()},this.options.refreshInterval===void 0?1000:this.options.refreshInterval)}}I.prototype.triggerRefresh=function(){return this.refresh(this.options.condition)};I.prototype.refresh=function(K){var J=this;if(this.refreshLock===0){this.refreshLock=1;this.list=this.listContainer.find("#list-container");G(this.options.requestUrl,K,function(L){J.pageInfo.empty();if(L.pageInfo!==void 0){J.pageInfo.append(L.pageInfo);J.pageInfo.find("a").click(function(N){var M;M=h(N.currentTarget);if(M.attr("href")===void 0){return false}K.currentPage=M.attr("href");J.refresh(K);return false})}J.list.empty();L.list.each(function(M){return J.list.append(J.options.formatter(M))});if(J.options.after!==void 0){J.options.after()}return J.refreshLock=0})}};return I})();n=function(){var J,K,N,P,O,I,T,S,Q,L,R,M;K=h("#cdoj-navbar");J=h("#cdoj-container");P=K.find("#cdoj-user");N=K.find("#cdoj-navbar-menu");I=J.find("#mzry1992-header");O=J.find("#mzry1992-container");if(I.length!==0&&O.length!==0){O.css("margin-top",I.outerHeight())}T=window.location.pathname;S="home";M=["problem","contest","status","user","admin"];for(L=0,R=M.length;L<R;L++){Q=M[L];if(T.startsWith("/"+Q+"/")){S=Q}}return N.find("#menu-item-"+S).addClass("cdoj-menu-selected")};q=function(){var L,J,I,K,M=this;L=h("#article-editor");if(L.length>0){J=h("#article-editor-title").attr("value");K=["content"];I=[];K.each(function(N,O){return I.push({id:N,editor:h("#"+N).flandre({picture:{uploadUrl:"/picture/uploadPicture/article/"+J}})})});return h("#submit").click(function(){var N;N={sampleInput:h("textarea#sample-input").val(),sampleOutput:h("textarea#sample-output").val(),title:h("#title").val(),source:h("#source").val()};I.each(function(O,P){return N[O.id]=O.editor.getText()});if(J==="new"){N.action="new"}else{N.action="edit";N.articleId=J}G("/article/edit",N,function(O){if(O.result==="success"){return window.location.href="/article/show/"+O.articleId}else{if(O.result==="field_error"){return alert("Please enter a valid title!")}else{return alert(O.error_msg)}}});return false})}};x=function(){var J,I;J=h("#article-list");if(J.length!==0){return I=new l({listContainer:J,requestUrl:"/article/search",condition:{currentPage:null,startId:void 0,endId:void 0,keyword:void 0,title:void 0,orderFields:"id",orderAsc:"false"},formatter:function(L){var K;K=function(N,M){if(N){return'<a href="/article/show/'+M+'" target="_blank">Read more >></a>'}else{return""}};return'<div class="cdoj-article">\n  <h1><a href="/article/show/'+L.articleId+'" target="_blank">'+L.title+"</a></h1>\n  <small>"+L.clicked+" visited, create by "+L.ownerName+', last modified at <span class="cdoj-article-post-time">'+(Date.create(L.time).relative())+'</span></small>\n  <div class="cdoj-article-summary">\n    <div class="cdoj-article-summary-content"><textarea>'+L.content+"</textarea></div>\n  </div>\n  <p>"+(K(L.hasMore,L.articleId))+"</p>\n  <hr />\n</div>"},after:function(){return h(".cdoj-article-summary-content").markdown()}})}};k=function(){var L,O,T,S,M,P,U,N,I,K,Q,J,R=this;L=h("#contest-show");if(L.length>0){T=h("#contest-title").attr("value");I=h("#contest-current-time").attr("value");J=h("#contest-start-time").attr("value");Q=h("#contest-end-time").attr("value");N=h("#contest-type").attr("value");M=h("#contest-status").attr("value");U=h("#contest-show-tab");S=h("#contest-problem-summary");P=U.find("a[href='#tab-contest-status']");O=h("#contest-progress-bar");if(M===p.PENDING){}else{if(M===p.RUNNING){}else{if(M===p.ENDED){O.addClass("progress-bar-success").css("width","100%")}}}S.find("a").click(function(Y){var W,V,X;W=h(Y.currentTarget);V=W.attr("href");if(V.startsWith("#")){X=U.find("a[href='"+V+"']");if(X.length>0){X.tab("show")}return false}else{return true}});K=f();if(K.userLogin){h("#submit-code").click(function(){var V;V={codeContent:h("#code-content").val(),languageId:h(":radio[name='language']:checked").attr("value"),contestId:T,problemId:h("#problem-selector").find("option:selected").val()};G("/status/submit",V,function(W){if(W.result==="error"){return alert(W.error_msg)}else{if(W.result==="success"){return P.tab("show")}}});return false})}initContestStatusList(T)}};d=function(){var I,J;I=h("#contest-list");if(I.length!==0){return J=new l({listContainer:I,requestUrl:"/contest/search",condition:{currentPage:null,startId:void 0,endId:void 0,keyword:void 0,title:void 0,orderFields:"id",orderAsc:"false"},formatter:function(L){var K;console.log(L);this.user=f();K=function(){var M;M="";if(this.user.userLogin&&this.user.currentUserType===y.ADMIN){M+='<div class="btn-toolbar" role="toolbar">\n  <div class="btn-group">\n    <button type="button" class="btn btn-default btn-sm contest-visible-state-editor" contest-id="'+L.contestId+'" visible="'+L.isVisible+'">\n      <i class="'+(L.isVisible?"fa fa-eye":"fa fa-eye-slash")+'"></i>\n    </button>\n    <button type="button" class="btn btn-default btn-sm contest-editor" contest-id="'+L.contestId+'"><i class="fa fa-pencil"></i></button>\n  </div>\n</div>'}return M};return'<div class="col-md-12">\n  <div class="panel panel-default">\n    <div class="panel-heading">\n      <h3 class="panel-title">\n        <a href="/contest/show/'+L.contestId+'" target="_blank">'+L.title+"</a>\n        <span class='pull-right admin-span'>"+(K())+'</span>\n      </h3>\n    </div>\n    <div class="panel-body">\n      <span>'+(Date.create(L.time).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"))+"--"+(Date.create(L.time+L.length*1000).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"))+"</span>\n    </div>\n  </div>\n</div>"},after:function(){var K=this;this.user=f();if(this.user.userLogin&&this.user.currentUserType===y.ADMIN){h(".contest-editor").click(function(M){var L;L=h(M.currentTarget);j("/contest/editor/"+(L.attr("contest-id")));return false});return h(".contest-visible-state-editor").click(function(M){var L,O,N;L=h(M.currentTarget);N=L.attr("visible")==="true"?true:false;O="/contest/operator/"+(L.attr("contest-id"))+"/isVisible/"+(!N);h.post(O,function(P){if(P.result==="success"){N=!N;L.attr("visible",N);return L.empty().append('<i class="'+(N?"fa fa-eye":"fa fa-eye-slash")+'"></i>')}});return false})}}})}};t=function(){var M,K,I,J,L=this;K=h("#problem-data-editor");if(K.length>0){J=K.find("#problem-data-editor-title").attr("value");K.find("#submit").click(function(){var N,O;N=K.find("#problem-data-form");O=N.getFormData();O.problemId=J;G("/problem/updateProblemData",O,function(P){return N.formValidate({result:P,onSuccess:function(){return window.location.href="/problem/show/"+J}})});return false});M=K.find("#problem-data-uploader");return I=new qq.FineUploaderBasic({button:M[0],request:{endpoint:"/problem/uploadProblemDataFile/"+J,inputName:"uploadFile"},validation:{allowedExtensions:["zip"],sizeLimit:100*1000*1000},multiple:false,callbacks:{onComplete:function(Q,P,O){var N;if(O.success==="true"){N='<div class="alert alert-success">\n  Total data: '+O.total+"\n</div>"}else{N='<div class="alert alert-danger">\n  '+O.error+"\n</div>"}return K.find("#uploader-info").empty().append(N)},onProgress:function(R,Q,O,P){var N;N='<div class="alert alert-info">\n  '+O+" bytes of "+P+"\n</div>";return K.find("#uploader-info").empty().append(N)},onError:function(P,O,N){return alert(N)}}})}};B=function(){var L,J,I,K,M=this;L=h("#problem-editor");if(L.length>0){J=h("#problem-editor-title").attr("value");K=["description","input","output","hint"];I=[];K.each(function(N,O){return I.push({id:N,editor:h("#"+N).flandre({picture:{uploadUrl:"/picture/uploadPicture/problem/"+J}})})});return h("#submit").click(function(){var N;N={sampleInput:h("textarea#sample-input").val(),sampleOutput:h("textarea#sample-output").val(),title:h("#title").val(),source:h("#source").val()};I.each(function(O,P){return N[O.id]=O.editor.getText()});if(J==="new"){N.action="new"}else{N.action="edit";N.problemId=J}G("/problem/edit",N,function(O){if(O.result==="success"){return window.location.href="/problem/show/"+O.problemId}else{if(O.result==="field_error"){return alert("Please enter a valid title!")}else{return alert(O.error_msg)}}});return false})}};o=function(){var I,J;I=h("#problem-list");if(I.length!==0){return J=new l({listContainer:I,requestUrl:"/problem/search",condition:{currentPage:null,startId:void 0,endId:void 0,title:void 0,source:void 0,isSpj:void 0,startDifficulty:void 0,endDifficulty:void 0,keyword:void 0,orderFields:void 0,orderAsc:void 0},formatter:function(N){var M,K,O,L;O="success";L="danger";this.user=f();M=function(){var P;P="";if(this.user.userLogin&&this.user.currentUserType===y.ADMIN){P+='<td style="padding: 4px;">\n<div class="btn-toolbar" role="toolbar">\n  <div class="btn-group">\n    <button type="button" class="btn btn-default btn-sm problem-visible-state-editor" problem-id="'+N.problemId+'" visible="'+N.isVisible+'">\n      <i class="'+(N.isVisible?"fa fa-eye":"fa fa-eye-slash")+'"></i>\n    </button>\n    <a href="/problem/editor/'+N.problemId+'" target="_blank" class="btn btn-default btn-sm problem-editor"><i class="fa fa-pencil"></i></a>\n    <a href="/problem/dataEditor/'+N.problemId+'" target="_blank" class="btn btn-default btn-sm problem-data-editor"><i class="fa fa-cog"></i></a>\n  </div>\n</div>\n</td>'}return P};K=function(R){var P,Q,S,T=this;Q="<i class='fa fa-star'></i>";S="<i class='fa fa-star-o'></i>";R=Math.max(1,Math.min(5,R));P="";R.times(function(){return P+=Q});(5-R).times(function(){return P+=S});return P};return'<tr>\n  <td style="text-align: right;">'+N.problemId+'</td>\n  <td><a href="/problem/show/'+N.problemId+'" target="_blank">'+N.title+"</a><small>&nbsp- "+N.source+'</small></td>\n  <td class="'+(N.status===m.PASS?O:N.status===m.FAIL?L:void 0)+'" style="text-align: right;"><a href="/status/list?problemId='+N.problemId+'" target="_blank">x '+N.solved+"</a></td>\n  "+(M())+"\n</tr>"},after:function(){var K=this;this.user=f();if(this.user.userLogin&&this.user.currentUserType===y.ADMIN){h(".difficulty-span").find("i").click(function(P){var N,M,L,O,Q;N=h(P.currentTarget);M=N.parent();O=M.attr("value");L=N.index()+1;Q="/problem/operator/"+O+"/difficulty/"+L;h.post(Q,function(R){if(R.result==="success"){M.find("i").removeClass("fa-star").removeClass("fa-star-o").addClass("fa-star-o");return L.times(function(S){return h(M.find("i")[S]).removeClass("fa-star-o").addClass("fa-star")})}});return false});return h(".problem-visible-state-editor").click(function(M){var L,O,N;L=h(M.currentTarget);N=L.attr("visible")==="true"?true:false;O="/problem/operator/"+(L.attr("problem-id"))+"/isVisible/"+(!N);h.post(O,function(P){if(P.result==="success"){N=!N;L.attr("visible",N);return L.empty().append('<i class="'+(N?"fa fa-eye":"fa fa-eye-slash")+'"></i>')}});return false})}}})}};a=function(){var J,I,L,K,M=this;if(h("#problem-show").length>0){J=h("#currentUser");this.userLogin=J.length!==0?true:false;L=h("#problem-title").attr("value");if(this.userLogin){h("#submit-code").click(function(){var N;N={codeContent:h("#code-content").val(),languageId:h(":radio[name='language']:checked").attr("value"),contestId:null,problemId:L};G("/status/submit",N,function(O){if(O.result==="error"){return alert(O.error_msg)}else{if(O.result==="success"){return window.location.href="/status/list"}}});return false})}I=h("#cdoj-best-solutions");if(I.length!==0){return K=new l({listContainer:I,requestUrl:"/status/search",condition:{currentPage:null,countPerPage:10,startId:void 0,endId:void 0,userName:void 0,problemId:L,languageId:void 0,contestId:void 0,result:"OJ_AC",orderFields:"timeCost,memoryCost,Length,statusId",orderAsc:"true,true,true,true"},formatter:function(Q){var N,O,P,R;P=function(T,S){return'<td style="text-align: center;">'+S+' KB</td>\n<td style="text-align: center;">'+T+" MS</td>"};N=f();R=function(T,S,V,U){if(S===7){if(N.userLogin&&(N.currentUserType==="1"||N.currentUser===U)){return'<a href="#" value="'+V+'" class="ce-link">'+T+"</a>"}else{return T}}else{return T}};O=function(S,V,U,T){if(N.userLogin&&(N.currentUserType==="1"||N.currentUser===T)){return'<a href="#" value="'+U+'" class="code-link">'+S+" B</a>"}else{return""+S+" B"}};return'<tr>\n  <td style="text-align: center;">'+Q.statusId+'</td>\n  <td style="text-align: center;"><a href="/user/center/'+Q.userName+'" target="_blank">'+Q.userName+"</a></td>\n\n  "+(Q.returnTypeId===1?P(Q.timeCost,Q.memoryCost):"<td></td><td></td>")+'\n\n  <td style="text-align: center;">'+Q.language+'</td>\n\n  <td style="text-align: center;">'+(O(Q.length,Q.language,Q.statusId,Q.userName))+'</td>\n  <td style="text-align: center;">'+(Date.create(Q.time).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"))+"</td>\n  <td></td>\n</tr>"},after:function(){var N=this;return h(".code-link").click(function(P){var O,Q;O=h(P.currentTarget);Q=O.attr("value");h.post("/status/info/"+Q,function(T){var R,S;S="";if(T.result==="success"){S=T.code}else{S=T.error_msg}S=S.trim().escapeHTML();console.log(S);R=h("#code-modal");R.find(".modal-body").empty().append("<pre>"+S+"</pre>");R.find(".modal-body").prettify();return R.modal("toggle")});return false})}})}}};c=function(){var I,J;I=h("#status-list");if(I.length!==0){return J=new l({listContainer:I,requestUrl:"/status/search",condition:{currentPage:null,startId:void 0,endId:void 0,userName:void 0,problemId:void 0,languageId:void 0,contestId:void 0,result:"OJ_ALL",orderFields:"statusId",orderAsc:"false"},formatter:function(Q){var K,P,L,M,N,R,O;O=function(S){switch(S){case 0:case 16:case 18:return"<i class='fa fa-spinner fa-spin'></i>";case 1:return"<i class='fa fa-check-circle'></i>";case 2:return"<i class='fa fa-circle'></i>";case 3:case 4:case 6:case 13:return"<i class='fa fa-ban'></i>";case 5:return"<i class='fa fa-times-circle'></i>";case 7:return"<i class='fa fa-warning'></i>";case 8:case 9:case 10:case 11:case 12:case 15:return"<i class='fa fa-bug'></i>";case 14:return"<i class='fa fa-frown-o'></i>";case 17:return"<i class='fa fa-gear fa-spin'></i>";default:return""}};P=function(S){switch(S){case 0:case 16:case 17:case 18:return"status-info";case 1:return"status-success";default:return"status-danger"}};M=function(S){return'<small class="pull-right">\n  <a href="/contest/show/'+S+'">Contest <i class="fa fa-trophy"></i>'+S+"</a>,&nbsp;\n</small>"};N=function(T,S){return'<td style="text-align: center;">'+S+' KB</td>\n<td style="text-align: center;">'+T+" MS</td>"};K=f();R=function(T,S,V,U){if(S===7){if(K.userLogin&&(K.currentUserType==="1"||K.currentUser===U)){return'<a href="#" value="'+V+'" class="ce-link">'+T+"</a>"}else{return T}}else{return T}};L=function(S,V,U,T){if(K.userLogin&&(K.currentUserType==="1"||K.currentUser===T)){return'<a href="#" value="'+U+'" class="code-link">'+S+" B</a>"}else{return""+S+" B"}};return'<tr>\n  <td style="text-align: center;">'+Q.statusId+'</td>\n  <td style="text-align: center;"><a href="/user/center/'+Q.userName+'" target="_blank">'+Q.userName+'</a></td>\n  <td style="text-align: center;"><a href="/problem/show/'+Q.problemId+'" target="_blank">'+Q.problemId+'</a></td>\n  <td style="text-align: center;" class="'+(P(Q.returnTypeId))+'">'+(R(Q.returnType,Q.returnTypeId,Q.statusId,Q.userName))+"</td>\n\n  "+(Q.returnTypeId===1?N(Q.timeCost,Q.memoryCost):"<td></td><td></td>")+'\n\n  <td style="text-align: center;">'+Q.language+'</td>\n\n  <td style="text-align: center;">'+(L(Q.length,Q.language,Q.statusId,Q.userName))+'</td>\n  <td style="text-align: center;">'+(Date.create(Q.time).format("{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}"))+"</td>\n  <td></td>\n</tr>"},after:function(){var K=this;h(".ce-link").click(function(M){var L,N;L=h(M.currentTarget);N=L.attr("value");h.post("/status/info/"+N,function(Q){var O,P;P="";if(Q.result==="success"){P=Q.compileInfo}else{P=Q.error_msg}P=P.trim();O=h("#compile-info-modal");O.find(".modal-body").empty().append("<pre>"+P+"</pre>");O.find(".modal-body").prettify();return O.modal("toggle")});return false});h(".code-link").click(function(M){var L,N;L=h(M.currentTarget);N=L.attr("value");h.post("/status/info/"+N,function(Q){var O,P;P="";if(Q.result==="success"){P=Q.code}else{P=Q.error_msg}P=P.trim().escapeHTML();console.log(P);O=h("#code-modal");O.find(".modal-body").empty().append("<pre>"+P+"</pre>");O.find(".modal-body").prettify();return O.modal("toggle")});return false});return h("#status-refresh-button").click(function(){J.triggerRefresh();return false})}})}};E=function(){var I=this;h(".dropdown-menu").find("form").click(function(J){return J.stopPropagation()});return h("img[type='avatar']").each(function(L,K){var J;J=h(K);return J.setAvatar({size:J.width()?J.width():void 0})})};A=function(){var I,J=this;I=h("#cdoj-activation-form");if(I.length!==0){return I.find("#submit-button").click(function(){var K;K=I.getFormData();G("/user/resetPassword",K,function(L){return I.formValidate({result:L,onSuccess:function(){alert("Success!");return window.location.href="/"}})});return false})}};f=function(){var I;I=h("#currentUser");this.userLogin=I.length!==0?true:false;if(this.userLogin){this.currentUser=I[0].innerHTML.trim();this.currentUserType=I.attr("type");return{userLogin:true,currentUser:this.currentUser,currentUserType:this.currentUserType}}else{return{userLogin:false}}};H=function(){var I=this;this.user=f();if(this.user.userLogin===false){h("#cdoj-login-button").click(function(){var J,K;J=h("#cdoj-login-form");K=J.getFormData();G("/user/login",K,function(L){return J.formValidate({result:L,onSuccess:function(){return window.location.reload()}})});return false});h("#cdoj-register-button").click(function(){var K,J;K=h("#cdoj-register-form");J=K.getFormData();G("/user/register",J,function(L){return K.formValidate({result:L,onSuccess:function(){return window.location.reload()}})});return false});h("#cdoj-activate-button").click(function(){var J,K;J=h("#cdoj-activate-form");K=J.getFormData();h.post("/user/sendSerialKey/"+K.userName,function(L){if(L.result==="success"){alert("We send you an Email with the url to reset your password right now, please check your mail box.");return h("#cdoj-activate-modal").modal("hide")}else{if(L.result==="failed"){return alert("Unknown error occurred.")}else{return alert(L.error_msg)}}});return false})}if(this.user.userLogin){h("#cdoj-logout-button").click(function(){h.post("/user/logout",function(J){if(J.result==="success"){return window.location.reload()}});return false});return h("#cdoj-profile-edit-button").click(function(){var K,J;K=h("#cdoj-profile-edit-form");J=K.getFormData();if(J.newPassword===""){delete J.newPassword}if(J.newPasswordRepeat===""){delete J.newPasswordRepeat}G("/user/edit",J,function(L){return K.formValidate({result:L,onSuccess:function(){return window.location.reload()}})});return false})}};g=function(){var J,I;J=h("#user-list");if(J.length!==0){return I=new l({listContainer:J,requestUrl:"/user/search",condition:{currentPage:null,startId:void 0,endId:void 0,userName:void 0,type:void 0,school:void 0,departmentId:void 0,orderFields:"solved,tried,id",orderAsc:"false,false,true"},formatter:function(L){var K;K=function(){var M;M="";if(this.user.userLogin&&this.user.currentUserType===y.ADMIN){M+='<div class="btn-toolbar" role="toolbar" style="position: absolute; top: 12px; right: 30px;">\n      <div class="btn-group">\n        <button type="button" class="btn btn-default btn-sm admin-profile-edit" user-name="'+L.userName+'">\n          <i class="fa fa-pencil"></i>\n        </button>\n      </div>\n    </div>'}return M};return'<div class="col-lg-6">\n  <div class="panel panel-default">\n    <div class="panel-body">\n      <div class="media">\n        <a class="pull-left" href="#">\n          <img id="cdoj-users-avatar" email="'+L.email+'"/>\n        </a>\n        <div class="media-body">\n          <h4 class="media-heading"><a href="/user/center/'+L.userName+'" target="_blank">'+L.nickName+" <small>"+L.userName+'</small></a></h4>\n          <span><i class="fa fa-map-marker"></i>'+L.school+'</span>\n          <br/>\n          <span><a href="/status/list?userName='+L.userName+'" target="_blank">'+L.solved+"/"+L.tried+"</a></span>\n          "+(K())+'\n        </div>\n      </div>\n    </div>\n    <div class="panel-footer" style="overflow: hidden;white-space: nowrap;text-overflow: ellipsis;">Motto: '+L.motto+"</div>\n  </div>\n</div>"},after:function(){var K,M,L,N=this;h("img#cdoj-users-avatar").setAvatar({size:64});L=h("#cdoj-admin-profile-edit-modal");K=h("#cdoj-admin-profile-edit-form");M=h("#cdoj-admin-profile-edit-form-onloading");h(".admin-profile-edit").click(function(Q){var O,P;O=h(Q.currentTarget);L.modal();P=O.attr("user-name");h.post("/user/secretProfile/"+P,function(R){console.log(R);K.setFormData(R.user);K.css("display","block");return M.css("display","none")});L.on("hidden.bs.modal",function(){K.css("display","none");return M.css("display","block")});return false});return h("#cdoj-admin-profile-edit-button").click(function(){var O;O=K.getFormData();if(O.newPassword===""){delete O.newPassword}if(O.newPasswordRepeat===""){delete O.newPasswordRepeat}G("/user/adminEdit",O,function(P){return K.formValidate({result:P,onSuccess:function(){L.modal("hide");return I.triggerRefresh()}})});return false})}})}};h=jQuery;h(function(){E();n();c();g();H();A();o();a();B();t();d();k();q();x();return F()})}).call(this);